<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Manipulating Data with dplyr | Forestry 472: Ecological Monitoring and Data Analysis</title>
  <meta name="description" content="Course book for FOR472: Ecological Monitoring and Data Analysis" />
  <meta name="generator" content="bookdown 0.10 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Manipulating Data with dplyr | Forestry 472: Ecological Monitoring and Data Analysis" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Course book for FOR472: Ecological Monitoring and Data Analysis" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Manipulating Data with dplyr | Forestry 472: Ecological Monitoring and Data Analysis" />
  
  <meta name="twitter:description" content="Course book for FOR472: Ecological Monitoring and Data Analysis" />
  

<meta name="author" content="Andrew O. Finley and Jeffrey W. Doser" />


<meta name="date" content="2019-05-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-structures.html">
<link rel="next" href="functions-and-programming.html">
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets/htmlwidgets.js"></script>
<link href="libs/leaflet/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet/leaflet.js"></script>
<link href="libs/leafletfix/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding/leaflet.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>1</b> Data</a><ul>
<li class="chapter" data-level="1.1" data-path="data.html"><a href="data.html#fef"><i class="fa fa-check"></i><b>1.1</b> FEF Tree Biomass Data Set</a></li>
<li class="chapter" data-level="1.2" data-path="data.html"><a href="data.html#face-experiment-data-set"><i class="fa fa-check"></i><b>1.2</b> FACE Experiment Data Set</a></li>
<li class="chapter" data-level="1.3" data-path="data.html"><a href="data.html#pef"><i class="fa fa-check"></i><b>1.3</b> PEF Inventory and LiDAR Data Set</a></li>
<li class="chapter" data-level="1.4" data-path="data.html"><a href="data.html#looking-forward"><i class="fa fa-check"></i><b>1.4</b> Looking Forward</a></li>
<li class="chapter" data-level="1.5" data-path="data.html"><a href="data.html#how-to-learn-the-most-important-section-in-this-book"><i class="fa fa-check"></i><b>1.5</b> How to Learn (The Most Important Section in This Book!)</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html"><i class="fa fa-check"></i><b>2</b> Introduction to R and RStudio</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#obtaining-and-installing-r"><i class="fa fa-check"></i><b>2.1</b> Obtaining and Installing R</a></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#obtaining-and-installing-rstudio"><i class="fa fa-check"></i><b>2.2</b> Obtaining and Installing RStudio</a></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#using-r-and-rstudio"><i class="fa fa-check"></i><b>2.3</b> Using R and RStudio</a><ul>
<li class="chapter" data-level="2.3.1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#r-as-a-calculator"><i class="fa fa-check"></i><b>2.3.1</b> R as a calculator</a></li>
<li class="chapter" data-level="2.3.2" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#sec:dec"><i class="fa fa-check"></i><b>2.3.2</b> Basic descriptive statistics and graphics in R</a></li>
<li class="chapter" data-level="2.3.3" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#simple-linear-regression-in-r"><i class="fa fa-check"></i><b>2.3.3</b> Simple linear regression in R</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#how-to-learn"><i class="fa fa-check"></i><b>2.4</b> How to Learn</a></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#getting-help"><i class="fa fa-check"></i><b>2.5</b> Getting help</a></li>
<li class="chapter" data-level="2.6" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#workspace-working-directory-and-keeping-organized"><i class="fa fa-check"></i><b>2.6</b> Workspace, working directory, and keeping organized</a></li>
<li class="chapter" data-level="2.7" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#quality-of-r-code"><i class="fa fa-check"></i><b>2.7</b> Quality of R code</a><ul>
<li class="chapter" data-level="2.7.1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#naming-files"><i class="fa fa-check"></i><b>2.7.1</b> Naming Files</a></li>
<li class="chapter" data-level="2.7.2" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#naming-variables"><i class="fa fa-check"></i><b>2.7.2</b> Naming Variables</a></li>
<li class="chapter" data-level="2.7.3" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#syntax"><i class="fa fa-check"></i><b>2.7.3</b> Syntax</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="scripts-r-markdown-and-reproducible-research.html"><a href="scripts-r-markdown-and-reproducible-research.html"><i class="fa fa-check"></i><b>3</b> Scripts, R Markdown, and Reproducible Research</a><ul>
<li class="chapter" data-level="3.1" data-path="scripts-r-markdown-and-reproducible-research.html"><a href="scripts-r-markdown-and-reproducible-research.html#scripts-in-r"><i class="fa fa-check"></i><b>3.1</b> Scripts in R</a></li>
<li class="chapter" data-level="3.2" data-path="scripts-r-markdown-and-reproducible-research.html"><a href="scripts-r-markdown-and-reproducible-research.html#r-markdown"><i class="fa fa-check"></i><b>3.2</b> R Markdown</a><ul>
<li class="chapter" data-level="3.2.1" data-path="scripts-r-markdown-and-reproducible-research.html"><a href="scripts-r-markdown-and-reproducible-research.html#creating-and-processing-r-markdown-documents"><i class="fa fa-check"></i><b>3.2.1</b> Creating and processing R Markdown documents</a></li>
<li class="chapter" data-level="3.2.2" data-path="scripts-r-markdown-and-reproducible-research.html"><a href="scripts-r-markdown-and-reproducible-research.html#text-lists-and-headers"><i class="fa fa-check"></i><b>3.2.2</b> Text: Lists and Headers</a></li>
<li class="chapter" data-level="3.2.3" data-path="scripts-r-markdown-and-reproducible-research.html"><a href="scripts-r-markdown-and-reproducible-research.html#code-chunks"><i class="fa fa-check"></i><b>3.2.3</b> Code Chunks</a></li>
<li class="chapter" data-level="3.2.4" data-path="scripts-r-markdown-and-reproducible-research.html"><a href="scripts-r-markdown-and-reproducible-research.html#output-formats-other-than-html"><i class="fa fa-check"></i><b>3.2.4</b> Output formats other than HTML</a></li>
<li class="chapter" data-level="3.2.5" data-path="scripts-r-markdown-and-reproducible-research.html"><a href="scripts-r-markdown-and-reproducible-research.html#latex-knitr-and-bookdown"><i class="fa fa-check"></i><b>3.2.5</b> LaTeX, knitr, and bookdown</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-structures.html"><a href="data-structures.html"><i class="fa fa-check"></i><b>4</b> Data Structures</a><ul>
<li class="chapter" data-level="4.1" data-path="data-structures.html"><a href="data-structures.html#vectors"><i class="fa fa-check"></i><b>4.1</b> Vectors</a><ul>
<li class="chapter" data-level="4.1.1" data-path="data-structures.html"><a href="data-structures.html#types-conversion-and-coercion"><i class="fa fa-check"></i><b>4.1.1</b> Types, Conversion, and Coercion</a></li>
<li class="chapter" data-level="4.1.2" data-path="data-structures.html"><a href="data-structures.html#accessing-specific-elements-of-vectors"><i class="fa fa-check"></i><b>4.1.2</b> Accessing Specific Elements of Vectors</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="data-structures.html"><a href="data-structures.html#factors"><i class="fa fa-check"></i><b>4.2</b> Factors</a></li>
<li class="chapter" data-level="4.3" data-path="data-structures.html"><a href="data-structures.html#names-of-objects-in-r"><i class="fa fa-check"></i><b>4.3</b> Names of objects in R</a></li>
<li class="chapter" data-level="4.4" data-path="data-structures.html"><a href="data-structures.html#missing-data-infinity-etc."><i class="fa fa-check"></i><b>4.4</b> Missing Data, Infinity, etc.</a><ul>
<li class="chapter" data-level="4.4.1" data-path="data-structures.html"><a href="data-structures.html#infinity-and-nan"><i class="fa fa-check"></i><b>4.4.1</b> Infinity and NaN</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="data-structures.html"><a href="data-structures.html#data-frames"><i class="fa fa-check"></i><b>4.5</b> Data Frames</a><ul>
<li class="chapter" data-level="4.5.1" data-path="data-structures.html"><a href="data-structures.html#accessing-specific-elements-of-data-frames"><i class="fa fa-check"></i><b>4.5.1</b> Accessing specific elements of data frames</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="data-structures.html"><a href="data-structures.html#lists"><i class="fa fa-check"></i><b>4.6</b> Lists</a><ul>
<li class="chapter" data-level="4.6.1" data-path="data-structures.html"><a href="data-structures.html#accessing-specific-elements-of-lists"><i class="fa fa-check"></i><b>4.6.1</b> Accessing specific elements of lists</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="data-structures.html"><a href="data-structures.html#subsetting-with-logical-vectors"><i class="fa fa-check"></i><b>4.7</b> Subsetting with Logical Vectors</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html"><i class="fa fa-check"></i><b>5</b> Manipulating Data with <code>dplyr</code></a><ul>
<li class="chapter" data-level="5.1" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html#minnesota-tree-growth-data"><i class="fa fa-check"></i><b>5.1</b> Minnesota tree growth data</a></li>
<li class="chapter" data-level="5.2" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html#improved-data-frames"><i class="fa fa-check"></i><b>5.2</b> Improved Data Frames</a></li>
<li class="chapter" data-level="5.3" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html#filtering-data-by-row"><i class="fa fa-check"></i><b>5.3</b> Filtering Data By Row</a></li>
<li class="chapter" data-level="5.4" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html#selecting-variables-by-column"><i class="fa fa-check"></i><b>5.4</b> Selecting Variables by Column</a></li>
<li class="chapter" data-level="5.5" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html#pipes"><i class="fa fa-check"></i><b>5.5</b> Pipes</a></li>
<li class="chapter" data-level="5.6" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html#arranging-data-by-row"><i class="fa fa-check"></i><b>5.6</b> Arranging Data by Row</a></li>
<li class="chapter" data-level="5.7" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html#renaming-variables"><i class="fa fa-check"></i><b>5.7</b> Renaming Variables</a></li>
<li class="chapter" data-level="5.8" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html#creating-new-variables"><i class="fa fa-check"></i><b>5.8</b> Creating New Variables</a></li>
<li class="chapter" data-level="5.9" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html#data-summaries-and-grouping"><i class="fa fa-check"></i><b>5.9</b> Data Summaries and Grouping</a></li>
<li class="chapter" data-level="5.10" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html#counts"><i class="fa fa-check"></i><b>5.10</b> Counts</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="functions-and-programming.html"><a href="functions-and-programming.html"><i class="fa fa-check"></i><b>6</b> Functions and Programming</a><ul>
<li class="chapter" data-level="6.1" data-path="functions-and-programming.html"><a href="functions-and-programming.html#r-functions"><i class="fa fa-check"></i><b>6.1</b> R Functions</a></li>
<li class="chapter" data-level="6.2" data-path="functions-and-programming.html"><a href="functions-and-programming.html#programming-conditional-statements"><i class="fa fa-check"></i><b>6.2</b> Programming: Conditional Statements</a><ul>
<li class="chapter" data-level="6.2.1" data-path="functions-and-programming.html"><a href="functions-and-programming.html#comparison-and-logical-operators"><i class="fa fa-check"></i><b>6.2.1</b> Comparison and Logical Operators</a></li>
<li class="chapter" data-level="6.2.2" data-path="functions-and-programming.html"><a href="functions-and-programming.html#functions-with-multiple-returns"><i class="fa fa-check"></i><b>6.2.2</b> Functions with Multiple Returns</a></li>
<li class="chapter" data-level="6.2.3" data-path="functions-and-programming.html"><a href="functions-and-programming.html#creating-functions"><i class="fa fa-check"></i><b>6.2.3</b> Creating functions</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="functions-and-programming.html"><a href="functions-and-programming.html#more-on-functions"><i class="fa fa-check"></i><b>6.3</b> More on Functions</a><ul>
<li class="chapter" data-level="6.3.1" data-path="functions-and-programming.html"><a href="functions-and-programming.html#calling-functions"><i class="fa fa-check"></i><b>6.3.1</b> Calling Functions</a></li>
<li class="chapter" data-level="6.3.2" data-path="functions-and-programming.html"><a href="functions-and-programming.html#the-...-argument"><i class="fa fa-check"></i><b>6.3.2</b> The <code>...</code> Argument</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="working-with-data-sources.html"><a href="working-with-data-sources.html"><i class="fa fa-check"></i><b>7</b> Working with Data Sources</a><ul>
<li class="chapter" data-level="7.1" data-path="working-with-data-sources.html"><a href="working-with-data-sources.html#reading-data-into-r"><i class="fa fa-check"></i><b>7.1</b> Reading Data into R</a></li>
<li class="chapter" data-level="7.2" data-path="working-with-data-sources.html"><a href="working-with-data-sources.html#reading-data-with-missing-observations"><i class="fa fa-check"></i><b>7.2</b> Reading Data with missing observations</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html"><i class="fa fa-check"></i><b>8</b> Spatial Data Visualization and Analysis</a><ul>
<li class="chapter" data-level="8.1" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#overview"><i class="fa fa-check"></i><b>8.1</b> Overview</a><ul>
<li class="chapter" data-level="8.1.1" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#some-spatial-data-packages"><i class="fa fa-check"></i><b>8.1.1</b> Some Spatial Data Packages</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#motivating-data"><i class="fa fa-check"></i><b>8.2</b> Motivating Data</a></li>
<li class="chapter" data-level="8.3" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#reading-spatial-data-into-r"><i class="fa fa-check"></i><b>8.3</b> Reading Spatial Data into R</a></li>
<li class="chapter" data-level="8.4" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#coordinate-reference-systems"><i class="fa fa-check"></i><b>8.4</b> Coordinate Reference Systems</a></li>
<li class="chapter" data-level="8.5" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#ggmap"><i class="fa fa-check"></i><b>8.5</b> Illustration using <code>ggmap</code></a></li>
<li class="chapter" data-level="8.6" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#illustration-using-leaflet"><i class="fa fa-check"></i><b>8.6</b> Illustration using <code>leaflet</code></a></li>
<li class="chapter" data-level="8.7" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#subsetting-spatial-data"><i class="fa fa-check"></i><b>8.7</b> Subsetting Spatial Data</a><ul>
<li class="chapter" data-level="8.7.1" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#fetching-and-cropping-data-using-raster"><i class="fa fa-check"></i><b>8.7.1</b> Fetching and Cropping Data using <code>raster</code></a></li>
<li class="chapter" data-level="8.7.2" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#logical-index-and-name-subsetting"><i class="fa fa-check"></i><b>8.7.2</b> Logical, Index, and Name Subsetting</a></li>
<li class="chapter" data-level="8.7.3" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#spatial-subsetting-and-overlay"><i class="fa fa-check"></i><b>8.7.3</b> Spatial Subsetting and Overlay</a></li>
<li class="chapter" data-level="8.7.4" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#spatial-aggregation"><i class="fa fa-check"></i><b>8.7.4</b> Spatial Aggregation</a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#where-to-go-from-here"><i class="fa fa-check"></i><b>8.8</b> Where to go from here</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Forestry 472: Ecological Monitoring and Data Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="manipulating-data-with-dplyr" class="section level1">
<h1><span class="header-section-number">Chapter 5</span> Manipulating Data with <code>dplyr</code></h1>
<p>Much of the effort (a figure of 80% is sometimes suggested) in data analysis is spent cleaning the data and getting it ready for analysis. Having effective tools for this task can save substantial time and effort. The R package <code>dplyr</code> written by Hadley Wickham is designed, in Hadley’s words, to be “a grammar of data manipulation, providing a consistent set of verbs that help you solve the most common data manipulation challenges.” Functions provided by <code>dplyr</code> do in fact capture key data analysis actions (i.e., verbs). Below we describe a few of the key functions available in <code>dplyr</code>:</p>
<ul>
<li><code>filter()</code> extracts rows based on their values</li>
<li><code>arrange()</code> changes the ordering of the rows</li>
<li><code>select()</code> extracts variables based on their names</li>
<li><code>mutate()</code> adds new variables that are functions of existing variables`</li>
<li><code>summarize()</code> reduces multiple values down to a single summary</li>
</ul>
<p>These all combine naturally with a <code>group_by</code> function that allows you to perform any operation grouped by values of one or more variables. All the tasks done using <code>dplyr</code> can be accomplished using more traditional R syntax; however, <code>dplyr</code>’s functions provide a potentially more efficient and convenient framework to accomplish these tasks. RStudio provides a convenient <a href="http://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf%7D%7Bdata%20wrangling%20cheat%20sheet">data wrangling cheat sheet</a> that covers many aspects of the <code>dplyr</code> package.</p>
<div id="minnesota-tree-growth-data" class="section level2">
<h2><span class="header-section-number">5.1</span> Minnesota tree growth data</h2>
<p>We’ll use some tree growth data to motivate the methods presented in this chapter. The data were collected in 2010 from 35 forest stands in and around Superior National Forest in northeastern Minnesota. See <span class="citation">Foster, D’Amato, and Bradford (<a href="#ref-foster14">2014</a>)</span> for details about data collection and preparation.</p>
<p>The tree growth data set consists of radial growth increments (collected using an increment borer) for 521 trees located in 105 forest plots in northeastern Minnesota from 1978 to 2007. The forest plots are distributed across 35 forest stands (3 plots per stand). Each stand represents an area with similar species composition and approximately homogeneous forest characteristics (e.g., trees/acre, tree size distribution, tree age distribution). In total, 15 species are present in the sample data. The “mn_trees.csv”&quot; file that is read into the <code>mn.trees</code> data frame below contains the dated (<code>Year</code>) annual radial growth increment (<code>rad.inc</code> annual growth ring width in mm) and basal area increment (<code>BA.inc</code> cross-sectional area of annual growth in cm<span class="math inline">\(^2\)</span>) estimates for each tree, along with ancillary tree-level information including species, diameter at breast height (DBH), and age. The data frame also includes a stand, plot, and tree identification number for each tree, i.e., <code>StandID</code>, <code>PlotID</code>, and <code>TreeID</code>, respectively. Each tree can be uniquely identified by its combined stand, plot, and tree ID values. For illustration, each line in Figure <a href="manipulating-data-with-dplyr.html#fig:mntrees">5.1</a> is an individual tree’s diameter growth over time from one stand colored by species. We also load the <code>dplyr</code> library for subsequent use<a href="#fn22" class="footnote-ref" id="fnref22"><sup>22</sup></a>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>mn.trees &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;http://blue.for.msu.edu/FOR472/data/mn_trees.csv&quot;</span>)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">str</span>(mn.trees)</code></pre>
<pre><code>&#39;data.frame&#39;:   15301 obs. of  9 variables:
 $ StandID: int  1 1 1 1 1 1 1 1 1 1 ...
 $ PlotID : int  1 1 1 1 1 1 1 1 1 1 ...
 $ TreeID : int  1 1 1 1 1 1 1 1 1 1 ...
 $ Species: Factor w/ 15 levels &quot;ABBA&quot;,&quot;ACRU&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
 $ Year   : int  1978 1979 1980 1981 1982 1983 1984 1985 1986 1987 ...
 $ Age    : int  19 20 21 22 23 24 25 26 27 28 ...
 $ DBH    : num  5.23 5.44 5.56 5.75 5.99 ...
 $ rad.inc: num  0.92 1.035 0.61 0.935 1.245 ...
 $ BA.inc : num  1.48 1.73 1.05 1.66 2.3 ...</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">library</span>(dplyr)</code></pre>
<pre><code>Registered S3 methods overwritten by &#39;ggplot2&#39;:
  method         from 
  [.quosures     rlang
  c.quosures     rlang
  print.quosures rlang</code></pre>
<pre><code>
Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>The following objects are masked from &#39;package:stats&#39;:

    filter, lag</code></pre>
<pre><code>The following objects are masked from &#39;package:base&#39;:

    intersect, setdiff, setequal, union</code></pre>
<div class="figure" style="text-align: center"><span id="fig:mntrees"></span>
<img src="bookdown_files/figure-html/mntrees-1.png" alt="Tree core derived diameter at breast height (DBH cm) by year for sampled trees in Stand 1" width="672" />
<p class="caption">
FIGURE 5.1: Tree core derived diameter at breast height (DBH cm) by year for sampled trees in Stand 1
</p>
</div>
</div>
<div id="improved-data-frames" class="section level2">
<h2><span class="header-section-number">5.2</span> Improved Data Frames</h2>
<p>The <code>dplyr</code> package provides two functions that offer improvements on data frames. First, the <code>data_frame</code> function is a trimmed down version of the <code>data.frame</code> that is somewhat more user friendly, and won’t be discussed here. Second, the <code>tbl_df</code> function creates a data frame like object called a tibble<a href="#fn23" class="footnote-ref" id="fnref23"><sup>23</sup></a>. A tibble has two advantages over a data frame. First, when printing, it only prints the first ten rows and the columns that fit on the page, as well as some additional information about the table’s dimension, data type of variables, and non-printed columns. Second, recall that subsetting a data frame can sometimes return a vector rather than a data frame (if only one row or column is the result of the subset). A tibble does not have this behavior. Here is an example using the <code>mn.trees</code> data frame.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">is.data.frame</span>(mn.trees[, <span class="dv">1</span>])</code></pre>
<pre><code>[1] FALSE</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">is.vector</span>(mn.trees[, <span class="dv">1</span>])</code></pre>
<pre><code>[1] TRUE</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>mn.trees.tbl &lt;-<span class="st"> </span><span class="kw">tbl_df</span>(mn.trees)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">is.tbl</span>(mn.trees.tbl[, <span class="dv">1</span>])</code></pre>
<pre><code>[1] TRUE</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">is.data.frame</span>(mn.trees.tbl[, <span class="dv">1</span>])</code></pre>
<pre><code>[1] TRUE</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>mn.trees.tbl[, <span class="dv">1</span>]</code></pre>
<pre><code># A tibble: 15,301 x 1
   StandID
     &lt;int&gt;
 1       1
 2       1
 3       1
 4       1
 5       1
 6       1
 7       1
 8       1
 9       1
10       1
# … with 15,291 more rows</code></pre>
<p>Note, above that once the data frame is reduced to one dimension by subsetting to one column, it is no longer a data frame it has been <em>simplified</em> to a vector. This might not seem like a big deal; however, it can be very frustrating and potentially break your code when you expect an object to behave like a data frame and it doesn’t because it’s now a vector. Alternatively, once we convert <code>mn.trees</code> to a tibble via the <code>tbl_df</code> function the object remains a data frame even when subset down to one dimension (there is no automatic simplification). Converting data frames using <code>tbl_df()</code> is not required for using <code>dplyr</code> but is convenient. Also, it is important to note that <code>tbl_df</code> is simply a wrapper around a data frame that provides some additional behaviors. The newly formed <code>tbl_df</code> object will still behave like a data frame (because it technically still is a data frame) but will have some added niceties (some of which are illustrated below).</p>
</div>
<div id="filtering-data-by-row" class="section level2">
<h2><span class="header-section-number">5.3</span> Filtering Data By Row</h2>
<p>Filtering creates row subsets of data that satisfy a logical statement. Considering the <code>mn.trees</code> data, the <code>filter</code> function can be used to examine a particular set of stands, plots, trees, measurement years, species, etc. The first argument in the <code>filter</code> function is the data frame or tibble from which you want to select the rows based on the logical statement given in the second argument. As you work through this chapter, you’ll notice the data are specified in the first argument of all <code>dplyr</code>’s functions. Below are several illustrative applications of the <code>filter</code> function.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">filter</span>(mn.trees.tbl, StandID <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</code></pre>
<pre><code># A tibble: 450 x 10
   StandID PlotID TreeID Species  Year   Age   DBH
     &lt;int&gt;  &lt;int&gt;  &lt;int&gt; &lt;fct&gt;   &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
 1       5     13     57 ABBA     1978     2  1.71
 2       5     13     57 ABBA     1979     3  2.12
 3       5     13     57 ABBA     1980     4  2.53
 4       5     13     57 ABBA     1981     5  2.97
 5       5     13     57 ABBA     1982     6  3.48
 6       5     13     57 ABBA     1983     7  3.98
 7       5     13     57 ABBA     1984     8  4.33
 8       5     13     57 ABBA     1985     9  4.70
 9       5     13     57 ABBA     1986    10  5.07
10       5     13     57 ABBA     1987    11  5.39
# … with 440 more rows, and 3 more variables:
#   rad.inc &lt;dbl&gt;, BA.inc &lt;dbl&gt;, UTreeID &lt;int&gt;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">filter</span>(mn.trees.tbl, Species <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;ABBA&quot;</span>, <span class="st">&quot;PIST&quot;</span>))</code></pre>
<pre><code># A tibble: 2,876 x 10
   StandID PlotID TreeID Species  Year   Age   DBH
     &lt;int&gt;  &lt;int&gt;  &lt;int&gt; &lt;fct&gt;   &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
 1       1      1      1 ABBA     1978    19  5.23
 2       1      1      1 ABBA     1979    20  5.44
 3       1      1      1 ABBA     1980    21  5.56
 4       1      1      1 ABBA     1981    22  5.75
 5       1      1      1 ABBA     1982    23  5.99
 6       1      1      1 ABBA     1983    24  6.24
 7       1      1      1 ABBA     1984    25  6.53
 8       1      1      1 ABBA     1985    26  6.84
 9       1      1      1 ABBA     1986    27  7.10
10       1      1      1 ABBA     1987    28  7.38
# … with 2,866 more rows, and 3 more variables:
#   rad.inc &lt;dbl&gt;, BA.inc &lt;dbl&gt;, UTreeID &lt;int&gt;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">filter</span>(mn.trees.tbl, DBH <span class="op">&gt;</span><span class="st"> </span><span class="dv">12</span> <span class="op">&amp;</span><span class="st"> </span>Year <span class="op">==</span><span class="st"> </span><span class="dv">1980</span>)</code></pre>
<pre><code># A tibble: 228 x 10
   StandID PlotID TreeID Species  Year   Age   DBH
     &lt;int&gt;  &lt;int&gt;  &lt;int&gt; &lt;fct&gt;   &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
 1       1      1      4 BEPA     1980    74  16.6
 2       1      2      8 BEPA     1980    92  19.8
 3       1      2      9 BEPA     1980    75  13.9
 4       1      2     10 BEPA     1980    98  20.8
 5       2      4     14 BEPA     1980    98  19.5
 6       2      4     15 BEPA     1980   124  21.3
 7       2      4     16 BEPA     1980   116  18.4
 8       2      4     17 PIGL     1980    34  12.6
 9       2      5     18 PIGL     1980    34  12.4
10       2      5     19 PIRE     1980   242  58.4
# … with 218 more rows, and 3 more variables:
#   rad.inc &lt;dbl&gt;, BA.inc &lt;dbl&gt;, UTreeID &lt;int&gt;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">filter</span>(mn.trees.tbl, Species <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;ABBA&quot;</span>, <span class="st">&quot;PIST&quot;</span>) <span class="op">&amp;</span><span class="st"> </span>Year <span class="op">==</span><span class="st"> </span>
<span class="op">+</span><span class="st">   </span><span class="dv">1985</span>)</code></pre>
<pre><code># A tibble: 87 x 10
   StandID PlotID TreeID Species  Year   Age   DBH
     &lt;int&gt;  &lt;int&gt;  &lt;int&gt; &lt;fct&gt;   &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
 1       1      1      1 ABBA     1985    26  6.84
 2       1      1      2 ABBA     1985    41  7.81
 3       1      2      6 ABBA     1985    19  6.16
 4       1      2      7 ABBA     1985    16 10.9 
 5       1      3     11 ABBA     1985    40 12.2 
 6       2      5     21 PIST     1985   149 35.9 
 7       2      6     22 ABBA     1985    33 12.3 
 8       3      7     28 PIST     1985    49 10.5 
 9       3      7     29 PIST     1985    48 17.7 
10       3      7     30 PIST     1985    52 22.4 
# … with 77 more rows, and 3 more variables:
#   rad.inc &lt;dbl&gt;, BA.inc &lt;dbl&gt;, UTreeID &lt;int&gt;</code></pre>
<p>Notice the full results are not printed. For example, when we asked for the data for stand 5, only the first ten rows were printed. This is an effect of using the <code>tbl_df</code> function. Of course if we wanted to analyze the results (as we will below) the full set of data would be available.</p>
</div>
<div id="selecting-variables-by-column" class="section level2">
<h2><span class="header-section-number">5.4</span> Selecting Variables by Column</h2>
<p>Another common task is to restrict attention to some subset of variables in the data set. This is accomplished using the <code>select</code> function. Like <code>filter</code>, the data frame or tibble is the first argument in the <code>select</code> function, followed by additional arguments identifying variables you want to include or exclude. Consider the examples below.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">select</span>(mn.trees.tbl, Year, DBH)</code></pre>
<pre><code># A tibble: 15,301 x 2
    Year   DBH
   &lt;int&gt; &lt;dbl&gt;
 1  1978  5.23
 2  1979  5.44
 3  1980  5.56
 4  1981  5.75
 5  1982  5.99
 6  1983  6.24
 7  1984  6.53
 8  1985  6.84
 9  1986  7.10
10  1987  7.38
# … with 15,291 more rows</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">select</span>(mn.trees.tbl, <span class="dv">2</span><span class="op">:</span><span class="dv">4</span>)</code></pre>
<pre><code># A tibble: 15,301 x 3
   PlotID TreeID Species
    &lt;int&gt;  &lt;int&gt; &lt;fct&gt;  
 1      1      1 ABBA   
 2      1      1 ABBA   
 3      1      1 ABBA   
 4      1      1 ABBA   
 5      1      1 ABBA   
 6      1      1 ABBA   
 7      1      1 ABBA   
 8      1      1 ABBA   
 9      1      1 ABBA   
10      1      1 ABBA   
# … with 15,291 more rows</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">select</span>(mn.trees.tbl, <span class="op">-</span><span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>))</code></pre>
<pre><code># A tibble: 15,301 x 7
   StandID  Year   Age   DBH rad.inc BA.inc UTreeID
     &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;int&gt;
 1       1  1978    19  5.23   0.92    1.48       1
 2       1  1979    20  5.44   1.03    1.73       1
 3       1  1980    21  5.56   0.61    1.05       1
 4       1  1981    22  5.75   0.935   1.66       1
 5       1  1982    23  5.99   1.25    2.30       1
 6       1  1983    24  6.24   1.20    2.31       1
 7       1  1984    25  6.53   1.50    3.00       1
 8       1  1985    26  6.84   1.54    3.25       1
 9       1  1986    27  7.10   1.28    2.81       1
10       1  1987    28  7.38   1.38    3.14       1
# … with 15,291 more rows</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">select</span>(mn.trees.tbl, <span class="kw">ends_with</span>(<span class="st">&quot;ID&quot;</span>))</code></pre>
<pre><code># A tibble: 15,301 x 4
   StandID PlotID TreeID UTreeID
     &lt;int&gt;  &lt;int&gt;  &lt;int&gt;   &lt;int&gt;
 1       1      1      1       1
 2       1      1      1       1
 3       1      1      1       1
 4       1      1      1       1
 5       1      1      1       1
 6       1      1      1       1
 7       1      1      1       1
 8       1      1      1       1
 9       1      1      1       1
10       1      1      1       1
# … with 15,291 more rows</code></pre>
<p>Notice a few things. Variables can be selected by name or column number. As usual a negative sign tells R to leave something out. Also, there are special <em>helper</em> functions such as <code>ends_with</code> that provide ways to match part of a variable’s name. Other very handy helper functions you should investigate are <code>begins_with</code>, <code>contains</code>, <code>matches</code>, <code>num_range</code>, <code>one_of</code>, and <code>everything</code>.</p>
</div>
<div id="pipes" class="section level2">
<h2><span class="header-section-number">5.5</span> Pipes</h2>
<p>Consider selecting the <code>Age</code> and <code>rad.inc</code> for the two aspen species POTR or POGR (<em>Populus tremuloides</em> and <em>Populus grandifolia</em>). One possibility is to nest a <code>filter</code> call within <code>select</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">select</span>(<span class="kw">filter</span>(mn.trees.tbl, Species <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;POTR&quot;</span>, 
<span class="op">+</span><span class="st">   &quot;POGR&quot;</span>)), Age, rad.inc)</code></pre>
<pre><code># A tibble: 719 x 2
     Age rad.inc
   &lt;int&gt;   &lt;dbl&gt;
 1    55   0.935
 2    56   0.7  
 3    57   0.25 
 4    58   0.595
 5    59   1.28 
 6    60   1.34 
 7    61   1.14 
 8    62   1.20 
 9    63   1.09 
10    64   0.975
# … with 709 more rows</code></pre>
<p>Even a two-step process like this becomes hard to follow in this nested form, and often we will want to perform more than two operations. There is a nice feature in <code>dplyr</code> that allows us to “feed” results of one function into the first argument of a subsequent function. Another way of saying this is that we are “piping” the results into another function. The <code>%&gt;%</code> operator does the piping.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>mn.trees.tbl <span class="op">%&gt;%</span><span class="st"> </span>
<span class="op">+</span><span class="st">   </span><span class="kw">filter</span>(Species <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;POTR&quot;</span>, <span class="st">&quot;POGR&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="op">+</span><span class="st">   </span>dplyr<span class="op">::</span><span class="kw">select</span>(Age, rad.inc)</code></pre>
<pre><code># A tibble: 719 x 2
     Age rad.inc
   &lt;int&gt;   &lt;dbl&gt;
 1    55   0.935
 2    56   0.7  
 3    57   0.25 
 4    58   0.595
 5    59   1.28 
 6    60   1.34 
 7    61   1.14 
 8    62   1.20 
 9    63   1.09 
10    64   0.975
# … with 709 more rows</code></pre>
<p>It can help to think of <code>%&gt;%</code> as representing the word “then.” The above can be read as, “Start with the data frame <code>mn.trees.tbl</code>, <em>then</em> filter it to select data from the species POTR and POGR, <em>then</em> select the variables age and radial growth increment from these data.”</p>
<p>The pipe operator <code>%&gt;%</code> is not restricted to functions in <code>dplyr</code>. In fact the pipe operator itself was introduced in another package called <code>magrittr</code>, but is included in <code>dplyr</code> as a convenience.</p>
</div>
<div id="arranging-data-by-row" class="section level2">
<h2><span class="header-section-number">5.6</span> Arranging Data by Row</h2>
<p>By default the <code>mn.trees</code> data are arranged in ascending order by <code>StandID</code>, then <code>PlotID</code>, then <code>TreeID</code>, then <code>Year</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(mn.trees.tbl, <span class="dv">5</span>)</code></pre>
<pre><code># A tibble: 5 x 10
  StandID PlotID TreeID Species  Year   Age   DBH
    &lt;int&gt;  &lt;int&gt;  &lt;int&gt; &lt;fct&gt;   &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
1       1      1      1 ABBA     1978    19  5.23
2       1      1      1 ABBA     1979    20  5.44
3       1      1      1 ABBA     1980    21  5.56
4       1      1      1 ABBA     1981    22  5.75
5       1      1      1 ABBA     1982    23  5.99
# … with 3 more variables: rad.inc &lt;dbl&gt;,
#   BA.inc &lt;dbl&gt;, UTreeID &lt;int&gt;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">tail</span>(mn.trees.tbl, <span class="dv">5</span>)</code></pre>
<pre><code># A tibble: 5 x 10
  StandID PlotID TreeID Species  Year   Age   DBH
    &lt;int&gt;  &lt;int&gt;  &lt;int&gt; &lt;fct&gt;   &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
1      35    105    521 POTR     2003    32  17.5
2      35    105    521 POTR     2004    33  17.6
3      35    105    521 POTR     2005    34  17.9
4      35    105    521 POTR     2006    35  18.1
5      35    105    521 POTR     2007    36  18.2
# … with 3 more variables: rad.inc &lt;dbl&gt;,
#   BA.inc &lt;dbl&gt;, UTreeID &lt;int&gt;</code></pre>
<p>This is convenient ordering for these data. But what if we wanted to change the order to be by <code>Species</code> then <code>Year</code>? The <code>arrange</code> function makes this easy. The following examples illustrate <code>arrange</code> but also use pipes to simplify code and <code>select</code> to focus attention on the columns of interest.</p>
<p>Let’s start with arranging in ascending order <code>BA.inc</code> for tree 1 in plot 1 in stand 1.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>mn.trees.tbl <span class="op">%&gt;%</span><span class="st"> </span>
<span class="op">+</span><span class="st">   </span><span class="kw">filter</span>(StandID <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>PlotID <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>TreeID <span class="op">==</span><span class="st"> </span><span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="op">+</span><span class="st">   </span>dplyr<span class="op">::</span><span class="kw">select</span>(StandID, PlotID, TreeID, BA.inc) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="op">+</span><span class="st">   </span><span class="kw">arrange</span>(BA.inc) </code></pre>
<pre><code># A tibble: 30 x 4
   StandID PlotID TreeID BA.inc
     &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;dbl&gt;
 1       1      1      1  0.501
 2       1      1      1  0.615
 3       1      1      1  1.05 
 4       1      1      1  1.18 
 5       1      1      1  1.35 
 6       1      1      1  1.38 
 7       1      1      1  1.42 
 8       1      1      1  1.48 
 9       1      1      1  1.66 
10       1      1      1  1.73 
# … with 20 more rows</code></pre>
<p>Possibly we want these data to be in decreasing (descending) order. Here, <code>desc()</code> is one of many <code>dplyr</code> helper functions.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>mn.trees.tbl <span class="op">%&gt;%</span><span class="st"> </span>
<span class="op">+</span><span class="st">   </span><span class="kw">filter</span>(StandID <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>PlotID <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>TreeID <span class="op">==</span><span class="st"> </span><span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="op">+</span><span class="st">   </span>dplyr<span class="op">::</span><span class="kw">select</span>(StandID, PlotID, TreeID, BA.inc) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="op">+</span><span class="st">   </span><span class="kw">arrange</span>(<span class="kw">desc</span>(BA.inc))</code></pre>
<pre><code># A tibble: 30 x 4
   StandID PlotID TreeID BA.inc
     &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;dbl&gt;
 1       1      1      1   4.45
 2       1      1      1   4.33
 3       1      1      1   3.67
 4       1      1      1   3.65
 5       1      1      1   3.59
 6       1      1      1   3.46
 7       1      1      1   3.25
 8       1      1      1   3.23
 9       1      1      1   3.16
10       1      1      1   3.14
# … with 20 more rows</code></pre>
<p>Passing multiple variables to <code>arrange</code> results in nested ordering. The subsequent code orders first by <code>Species</code>, then <code>Year</code> within <code>Species</code>, then <code>BA.inc</code> within <code>Year</code> and <code>Species</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>mn.trees.tbl <span class="op">%&gt;%</span><span class="st"> </span>
<span class="op">+</span><span class="st">   </span>dplyr<span class="op">::</span><span class="kw">select</span>(Species, Year, BA.inc) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="op">+</span><span class="st">   </span><span class="kw">arrange</span>(Species, Year, BA.inc) </code></pre>
<pre><code># A tibble: 15,301 x 3
   Species  Year BA.inc
   &lt;fct&gt;   &lt;int&gt;  &lt;dbl&gt;
 1 ABBA     1978  0.253
 2 ABBA     1978  0.368
 3 ABBA     1978  0.416
 4 ABBA     1978  0.560
 5 ABBA     1978  0.620
 6 ABBA     1978  0.650
 7 ABBA     1978  0.672
 8 ABBA     1978  0.676
 9 ABBA     1978  0.699
10 ABBA     1978  0.760
# … with 15,291 more rows</code></pre>
<p>For analyzing data in R, the order shouldn’t matter. But for presentation to human eyes, the order is important.</p>
</div>
<div id="renaming-variables" class="section level2">
<h2><span class="header-section-number">5.7</span> Renaming Variables</h2>
<p>The <code>dplyr</code> package has a <code>rename</code> function that makes renaming variables in a data frame quite easy. Below, I rename the <code>rad.inc</code> and <code>BA.inc</code> to remind myself of their measurement units (i.e., millimeters and centimeters squared, respectively).</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>mn.trees.tbl &lt;-<span class="st"> </span><span class="kw">rename</span>(mn.trees.tbl, <span class="dt">rad.inc.mm =</span> rad.inc, 
<span class="op">+</span><span class="st">                        </span><span class="dt">BA.inc.cm2 =</span> BA.inc)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(mn.trees.tbl)</code></pre>
<pre><code># A tibble: 6 x 10
  StandID PlotID TreeID Species  Year   Age   DBH
    &lt;int&gt;  &lt;int&gt;  &lt;int&gt; &lt;fct&gt;   &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
1       1      1      1 ABBA     1978    19  5.23
2       1      1      1 ABBA     1979    20  5.44
3       1      1      1 ABBA     1980    21  5.56
4       1      1      1 ABBA     1981    22  5.75
5       1      1      1 ABBA     1982    23  5.99
6       1      1      1 ABBA     1983    24  6.24
# … with 3 more variables: rad.inc.mm &lt;dbl&gt;,
#   BA.inc.cm2 &lt;dbl&gt;, UTreeID &lt;int&gt;</code></pre>
</div>
<div id="creating-new-variables" class="section level2">
<h2><span class="header-section-number">5.8</span> Creating New Variables</h2>
<p>We routinely want to create new variables and add them to an existing data frame. This task is done using the <code>mutate</code> function. <code>mutate</code> adds new columns to the right side of your data frame or tibble. This function is particularly useful because it can make a new variable by simply referencing variables that exist in the data frame. Let’s start with a simple example. Below I create a small data frame called <code>df</code> with two numeric columns <code>a</code> and <code>b</code>. Next, I add a new variable <code>c</code> that is the square root of the sum of <code>a</code> and <code>b</code>. We can of course use <code>mutate</code> to add variables that are not a function of existing variables, e.g., see the addition of the logical variable <code>d</code> below (this time using a pipe).</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="st">&quot;a&quot;</span>=<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="st">&quot;b&quot;</span>=<span class="kw">c</span>(<span class="dv">8</span>, <span class="dv">12</span>, <span class="dv">19</span>, <span class="dv">76</span>))
<span class="op">&gt;</span><span class="st"> </span>df &lt;-<span class="st"> </span><span class="kw">mutate</span>(df, <span class="dt">c =</span> <span class="kw">log</span>(a<span class="op">+</span>b))
<span class="op">&gt;</span><span class="st"> </span>df</code></pre>
<pre><code>  a  b     c
1 1  8 2.197
2 2 12 2.639
3 3 19 3.091
4 4 76 4.382</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>df &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span>
<span class="op">+</span><span class="st">   </span><span class="kw">mutate</span>(<span class="dt">d =</span> <span class="kw">c</span>(<span class="st">&quot;Jerry&quot;</span>,<span class="st">&quot;Jerry&quot;</span>,<span class="st">&quot;Bobby&quot;</span>,<span class="st">&quot;Bobby&quot;</span>))
<span class="op">&gt;</span><span class="st"> </span>df</code></pre>
<pre><code>  a  b     c     d
1 1  8 2.197 Jerry
2 2 12 2.639 Jerry
3 3 19 3.091 Bobby
4 4 76 4.382 Bobby</code></pre>
<p>Sometimes, we want to create new variables that are a function of existing variables but not add them to the data frame. In this case we use the <code>transmute</code> function. Here, I create a new data frame <code>df.2</code> that comprises two new variables, <code>e</code> and <code>f</code> where <code>e</code> is <code>a+c</code> and <code>f</code> is just a copy of <code>d</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>df<span class="fl">.2</span> &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">transmute</span>(<span class="dt">e =</span> a <span class="op">+</span><span class="st"> </span>c, <span class="dt">f =</span> d)
<span class="op">&gt;</span><span class="st"> </span>df<span class="fl">.2</span></code></pre>
<pre><code>      e     f
1 3.197 Jerry
2 4.639 Jerry
3 6.091 Bobby
4 8.382 Bobby</code></pre>
</div>
<div id="data-summaries-and-grouping" class="section level2">
<h2><span class="header-section-number">5.9</span> Data Summaries and Grouping</h2>
<p>The <code>summarize</code> function computes summary statistics or user provided functions for one or more variables in a data frame. Below, the <code>summarize</code> function is used to calculate the mean and sum of variable <code>a</code> in the data frame created in the previous section.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">summarize</span>(df, <span class="dt">a.mean =</span> <span class="kw">mean</span>(a), <span class="dt">a.sum =</span> <span class="kw">sum</span>(a))</code></pre>
<pre><code>  a.mean a.sum
1    2.5    10</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="co">##or</span>
<span class="er">&gt;</span><span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span>
<span class="op">+</span><span class="st">   </span><span class="kw">summarize</span>(<span class="dt">a.mean =</span> <span class="kw">mean</span>(a), <span class="dt">a.sum =</span> <span class="kw">sum</span>(a))</code></pre>
<pre><code>  a.mean a.sum
1    2.5    10</code></pre>
<p>By itself, <code>summarize</code> is of limited use. Often we want row summaries for specific components of the data. For example, say we want to sum variable <code>a</code> for each category of variable <code>d</code>. One option is to subset and summarize for each category in <code>b</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span>
<span class="op">+</span><span class="st">   </span><span class="kw">filter</span>(d <span class="op">==</span><span class="st"> &quot;Jerry&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="op">+</span><span class="st">   </span><span class="kw">summarize</span>(<span class="dt">a.sum =</span> <span class="kw">sum</span>(a))</code></pre>
<pre><code>  a.sum
1     3</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span>
<span class="op">+</span><span class="st">   </span><span class="kw">filter</span>(d <span class="op">==</span><span class="st"> &quot;Bobby&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="op">+</span><span class="st">   </span><span class="kw">summarize</span>(<span class="dt">a.sum =</span> <span class="kw">sum</span>(a))</code></pre>
<pre><code>  a.sum
1     7</code></pre>
<p>This is a very tedious approach if the number of subsets is large. Also, we might want the result as a single data frame, which means we would need to then combine the summaries of all the subsets in a subsequent step.</p>
<p>The <code>group_by</code> function used in combination with <code>summarize</code> simplifies this task and makes the output more useful. The <code>summarize</code> function is applied to each category in the <em>grouping</em> variable specified in <code>group_by</code>, as illustrated in the code below.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span>
<span class="op">+</span><span class="st">   </span><span class="kw">group_by</span>(d) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="op">+</span><span class="st">   </span><span class="kw">summarize</span>(<span class="dt">a.sum =</span> <span class="kw">sum</span>(a)) </code></pre>
<pre><code># A tibble: 2 x 2
  d     a.sum
  &lt;chr&gt; &lt;int&gt;
1 Bobby     7
2 Jerry     3</code></pre>
<p>We can specify multiple variables with <code>group_by</code> to define the categories to summarize. Let’s return to the <code>mn.trees</code> data set and find the sum of annual radial growth increment by species within each stand.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>stand.spp &lt;-<span class="st"> </span>mn.trees.tbl <span class="op">%&gt;%</span><span class="st"> </span>
<span class="op">+</span><span class="st">   </span><span class="kw">group_by</span>(StandID, Species) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="op">+</span><span class="st">   </span><span class="kw">summarize</span>(<span class="dt">rad.inc.total =</span> <span class="kw">sum</span>(rad.inc.mm), 
<span class="op">+</span><span class="st">             </span><span class="dt">BA.inc.total =</span> <span class="kw">sum</span>(BA.inc.cm2))
<span class="op">&gt;</span><span class="st"> </span>stand.spp</code></pre>
<pre><code># A tibble: 115 x 4
# Groups:   StandID [35]
   StandID Species rad.inc.total BA.inc.total
     &lt;int&gt; &lt;fct&gt;           &lt;dbl&gt;        &lt;dbl&gt;
 1       1 ABBA            109.         309. 
 2       1 BEPA            122.         733. 
 3       1 PIGL             58.0        121. 
 4       2 ABBA             88.8        262. 
 5       2 BEPA            101.         488. 
 6       2 PIGL             86.3        431. 
 7       2 PIRE             35.7        510. 
 8       2 PIST             60.3        749. 
 9       3 ABBA             57.6        135. 
10       3 PIGL             21.1         94.8
# … with 105 more rows</code></pre>
<p>There are several things to notice here. Our code specifies both <code>StandID</code> and <code>Species</code> variables in the <code>group_by</code> function, which causes <code>summarize</code> arguments to be applied to each stand and species combination. For example, looking at the output, we can see that stand 1 contains three species <code>ABBA</code> (<em>Abies balsamea</em>), <code>BEPA</code> (<em>Betula papyrifera</em>), and <code>PIGL</code> (<em>Picea glauca</em>). Also, for each of these species, the sum of radial growth increments, i.e., <code>rad.inc.total</code>, is 108.735, 121.515, and 58.045, and the sum of basal area growth increments, i.e., <code>BA.inc.total</code>, is approximately 308.98, 732.58, and 121.26. The two commented lines above the resulting tibble tell us there are 115 such stand and species combinations, i.e., <code># A tibble: 115 x 4</code>, and the tibble is grouped by <code>StandID</code>, i.e., <code># Groups: StandID [?]</code>. This last bit of information is important. Recall a tibble is a data frame with some additional functionality. Not only does the resulting tibble hold the <code>summarize</code> output, it also retains all levels of grouping to the left of the last grouping variable specified in <code>group_by</code>. In this case we grouped by <code>StandID</code> and <code>Species</code> prior to calling <code>summarize</code>, so the resulting tibble is grouped by <code>StandID</code>. If we fed the resulting tibble back into <code>summarize</code>, aggregation would occur for each stand. Depending on the analysis, this retention of grouping can be handy or annoying. If necessary, use <code>ungroup</code> to remove the grouping from a tibble, e.g., <code>stand.spp %&gt;% ungroup()</code>.</p>
</div>
<div id="counts" class="section level2">
<h2><span class="header-section-number">5.10</span> Counts</h2>
<p>In many circumstances it is useful to know how many rows are being summarized. Continuing the previous example, say we want to know how many increment measurements comprise a given <code>StandID</code> and <code>Species</code> combination and, hence, went into the <code>rad.inc.total</code> and <code>BA.inc.total</code> summaries. The <code>n</code> function returns the count of rows per group (or number of rows in an ungrouped tibble). Below, I add a new variable called <code>n.inc</code> to the our previous <code>stand.spp</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>stand.spp &lt;-<span class="st"> </span>mn.trees.tbl <span class="op">%&gt;%</span>
<span class="op">+</span><span class="st">   </span><span class="kw">group_by</span>(StandID, Species) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="op">+</span><span class="st">   </span><span class="kw">summarize</span>(<span class="dt">rad.inc.total =</span> <span class="kw">sum</span>(rad.inc.mm), 
<span class="op">+</span><span class="st">             </span><span class="dt">BA.inc.total =</span> <span class="kw">sum</span>(BA.inc.cm2),
<span class="op">+</span><span class="st">             </span><span class="dt">n.inc =</span> <span class="kw">n</span>())
<span class="op">&gt;</span><span class="st"> </span>stand.spp</code></pre>
<pre><code># A tibble: 115 x 5
# Groups:   StandID [35]
   StandID Species rad.inc.total BA.inc.total n.inc
     &lt;int&gt; &lt;fct&gt;           &lt;dbl&gt;        &lt;dbl&gt; &lt;int&gt;
 1       1 ABBA            109.         309.    150
 2       1 BEPA            122.         733.    150
 3       1 PIGL             58.0        121.     54
 4       2 ABBA             88.8        262.     45
 5       2 BEPA            101.         488.    180
 6       2 PIGL             86.3        431.     90
 7       2 PIRE             35.7        510.     60
 8       2 PIST             60.3        749.     30
 9       3 ABBA             57.6        135.     30
10       3 PIGL             21.1         94.8    60
# … with 105 more rows</code></pre>
<p>This is helpful. We now know how many individual increment measurements were used to compute the summaries. However, it is not clear how many trees were actually cored to generate these measurements. We can get at the count of unique trees in each group by using the <code>n_distinct</code> helper function.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>stand.spp &lt;-<span class="st"> </span>mn.trees.tbl <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(StandID, Species) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="op">+</span><span class="st">     </span><span class="kw">summarize</span>(<span class="dt">rad.inc.total =</span> <span class="kw">sum</span>(rad.inc.mm), 
<span class="op">+</span><span class="st">               </span><span class="dt">BA.inc.total =</span> <span class="kw">sum</span>(BA.inc.cm2),
<span class="op">+</span><span class="st">               </span><span class="dt">n.inc =</span> <span class="kw">n</span>(),
<span class="op">+</span><span class="st">               </span><span class="dt">n.trees =</span> <span class="kw">n_distinct</span>(PlotID, TreeID))
<span class="op">&gt;</span><span class="st"> </span>stand.spp</code></pre>
<pre><code># A tibble: 115 x 6
# Groups:   StandID [35]
   StandID Species rad.inc.total BA.inc.total n.inc
     &lt;int&gt; &lt;fct&gt;           &lt;dbl&gt;        &lt;dbl&gt; &lt;int&gt;
 1       1 ABBA            109.         309.    150
 2       1 BEPA            122.         733.    150
 3       1 PIGL             58.0        121.     54
 4       2 ABBA             88.8        262.     45
 5       2 BEPA            101.         488.    180
 6       2 PIGL             86.3        431.     90
 7       2 PIRE             35.7        510.     60
 8       2 PIST             60.3        749.     30
 9       3 ABBA             57.6        135.     30
10       3 PIGL             21.1         94.8    60
# … with 105 more rows, and 1 more variable:
#   n.trees &lt;int&gt;</code></pre>
<p>Recall, <code>StandID</code>, <code>PlotID</code>, and <code>TreeID</code> identifies the set of increment measurements for a specific tree. Therefore, if we group using <code>StandID</code>, then <code>n_distinct(PlotID, TreeID)</code> returns the unique tree count within each stand. Above, we also group by <code>Species</code> so the unique tree count within the stand is also partitioned by species. Now, we can see the new variable <code>n.trees</code> is the number of trees by species over which <code>n.inc</code> increment measurements were collected.</p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-foster14">
<p>Foster, J. R., A. W. D’Amato, and J. B. Bradford. 2014. “Looking for Age-Related Growth Decline in Natural Forests: Unexpected Biomass Patterns from Tree Rings and Simulated Mortality.” <em>Oecologia</em> 175 (1): 363–74.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="22">
<li id="fn22"><p>The text printed immediately after <code>library(dplyr)</code> means the <code>stats</code> and <code>base</code> packages, which are automatically loaded when you start R, have functions with the same name as functions in <code>dplyr</code>. So, for example, if you call the <code>filter()</code> or <code>lag()</code>, R will use <code>library(dplyr)</code>‘s functions. Use the <code>::</code> operator to explicitly identify which packages’ function you want to use, e.g., if you want <code>stats</code>’s <code>lag()</code> then call <code>stats::lag()</code>.<a href="manipulating-data-with-dplyr.html#fnref22" class="footnote-back">↩</a></p></li>
<li id="fn23"><p>Reminds me of <a href="https://en.wikipedia.org/wiki/The_Trouble_with_Tribbles">The Trouble with Tribbles</a><a href="manipulating-data-with-dplyr.html#fnref23" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-structures.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="functions-and-programming.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["bookdown.pdf"],
"toc": {
"collapse": "none"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
