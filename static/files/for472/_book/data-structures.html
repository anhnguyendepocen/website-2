<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Data Structures | Forestry 472: Ecological Monitoring and Data Analysis</title>
  <meta name="description" content="Course book for FOR472: Ecological Monitoring and Data Analysis" />
  <meta name="generator" content="bookdown 0.10 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Data Structures | Forestry 472: Ecological Monitoring and Data Analysis" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Course book for FOR472: Ecological Monitoring and Data Analysis" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Data Structures | Forestry 472: Ecological Monitoring and Data Analysis" />
  
  <meta name="twitter:description" content="Course book for FOR472: Ecological Monitoring and Data Analysis" />
  

<meta name="author" content="Andrew O. Finley and Jeffrey W. Doser" />


<meta name="date" content="2019-05-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="scripts-r-markdown-and-reproducible-research.html">
<link rel="next" href="manipulating-data-with-dplyr.html">
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets/htmlwidgets.js"></script>
<link href="libs/leaflet/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet/leaflet.js"></script>
<link href="libs/leafletfix/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding/leaflet.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>1</b> Data</a><ul>
<li class="chapter" data-level="1.1" data-path="data.html"><a href="data.html#fef"><i class="fa fa-check"></i><b>1.1</b> FEF Tree Biomass Data Set</a></li>
<li class="chapter" data-level="1.2" data-path="data.html"><a href="data.html#face-experiment-data-set"><i class="fa fa-check"></i><b>1.2</b> FACE Experiment Data Set</a></li>
<li class="chapter" data-level="1.3" data-path="data.html"><a href="data.html#pef"><i class="fa fa-check"></i><b>1.3</b> PEF Inventory and LiDAR Data Set</a></li>
<li class="chapter" data-level="1.4" data-path="data.html"><a href="data.html#looking-forward"><i class="fa fa-check"></i><b>1.4</b> Looking Forward</a></li>
<li class="chapter" data-level="1.5" data-path="data.html"><a href="data.html#how-to-learn-the-most-important-section-in-this-book"><i class="fa fa-check"></i><b>1.5</b> How to Learn (The Most Important Section in This Book!)</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html"><i class="fa fa-check"></i><b>2</b> Introduction to R and RStudio</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#obtaining-and-installing-r"><i class="fa fa-check"></i><b>2.1</b> Obtaining and Installing R</a></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#obtaining-and-installing-rstudio"><i class="fa fa-check"></i><b>2.2</b> Obtaining and Installing RStudio</a></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#using-r-and-rstudio"><i class="fa fa-check"></i><b>2.3</b> Using R and RStudio</a><ul>
<li class="chapter" data-level="2.3.1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#r-as-a-calculator"><i class="fa fa-check"></i><b>2.3.1</b> R as a calculator</a></li>
<li class="chapter" data-level="2.3.2" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#sec:dec"><i class="fa fa-check"></i><b>2.3.2</b> Basic descriptive statistics and graphics in R</a></li>
<li class="chapter" data-level="2.3.3" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#simple-linear-regression-in-r"><i class="fa fa-check"></i><b>2.3.3</b> Simple linear regression in R</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#how-to-learn"><i class="fa fa-check"></i><b>2.4</b> How to Learn</a></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#getting-help"><i class="fa fa-check"></i><b>2.5</b> Getting help</a></li>
<li class="chapter" data-level="2.6" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#workspace-working-directory-and-keeping-organized"><i class="fa fa-check"></i><b>2.6</b> Workspace, working directory, and keeping organized</a></li>
<li class="chapter" data-level="2.7" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#quality-of-r-code"><i class="fa fa-check"></i><b>2.7</b> Quality of R code</a><ul>
<li class="chapter" data-level="2.7.1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#naming-files"><i class="fa fa-check"></i><b>2.7.1</b> Naming Files</a></li>
<li class="chapter" data-level="2.7.2" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#naming-variables"><i class="fa fa-check"></i><b>2.7.2</b> Naming Variables</a></li>
<li class="chapter" data-level="2.7.3" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#syntax"><i class="fa fa-check"></i><b>2.7.3</b> Syntax</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="scripts-r-markdown-and-reproducible-research.html"><a href="scripts-r-markdown-and-reproducible-research.html"><i class="fa fa-check"></i><b>3</b> Scripts, R Markdown, and Reproducible Research</a><ul>
<li class="chapter" data-level="3.1" data-path="scripts-r-markdown-and-reproducible-research.html"><a href="scripts-r-markdown-and-reproducible-research.html#scripts-in-r"><i class="fa fa-check"></i><b>3.1</b> Scripts in R</a></li>
<li class="chapter" data-level="3.2" data-path="scripts-r-markdown-and-reproducible-research.html"><a href="scripts-r-markdown-and-reproducible-research.html#r-markdown"><i class="fa fa-check"></i><b>3.2</b> R Markdown</a><ul>
<li class="chapter" data-level="3.2.1" data-path="scripts-r-markdown-and-reproducible-research.html"><a href="scripts-r-markdown-and-reproducible-research.html#creating-and-processing-r-markdown-documents"><i class="fa fa-check"></i><b>3.2.1</b> Creating and processing R Markdown documents</a></li>
<li class="chapter" data-level="3.2.2" data-path="scripts-r-markdown-and-reproducible-research.html"><a href="scripts-r-markdown-and-reproducible-research.html#text-lists-and-headers"><i class="fa fa-check"></i><b>3.2.2</b> Text: Lists and Headers</a></li>
<li class="chapter" data-level="3.2.3" data-path="scripts-r-markdown-and-reproducible-research.html"><a href="scripts-r-markdown-and-reproducible-research.html#code-chunks"><i class="fa fa-check"></i><b>3.2.3</b> Code Chunks</a></li>
<li class="chapter" data-level="3.2.4" data-path="scripts-r-markdown-and-reproducible-research.html"><a href="scripts-r-markdown-and-reproducible-research.html#output-formats-other-than-html"><i class="fa fa-check"></i><b>3.2.4</b> Output formats other than HTML</a></li>
<li class="chapter" data-level="3.2.5" data-path="scripts-r-markdown-and-reproducible-research.html"><a href="scripts-r-markdown-and-reproducible-research.html#latex-knitr-and-bookdown"><i class="fa fa-check"></i><b>3.2.5</b> LaTeX, knitr, and bookdown</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-structures.html"><a href="data-structures.html"><i class="fa fa-check"></i><b>4</b> Data Structures</a><ul>
<li class="chapter" data-level="4.1" data-path="data-structures.html"><a href="data-structures.html#vectors"><i class="fa fa-check"></i><b>4.1</b> Vectors</a><ul>
<li class="chapter" data-level="4.1.1" data-path="data-structures.html"><a href="data-structures.html#types-conversion-and-coercion"><i class="fa fa-check"></i><b>4.1.1</b> Types, Conversion, and Coercion</a></li>
<li class="chapter" data-level="4.1.2" data-path="data-structures.html"><a href="data-structures.html#accessing-specific-elements-of-vectors"><i class="fa fa-check"></i><b>4.1.2</b> Accessing Specific Elements of Vectors</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="data-structures.html"><a href="data-structures.html#factors"><i class="fa fa-check"></i><b>4.2</b> Factors</a></li>
<li class="chapter" data-level="4.3" data-path="data-structures.html"><a href="data-structures.html#names-of-objects-in-r"><i class="fa fa-check"></i><b>4.3</b> Names of objects in R</a></li>
<li class="chapter" data-level="4.4" data-path="data-structures.html"><a href="data-structures.html#missing-data-infinity-etc."><i class="fa fa-check"></i><b>4.4</b> Missing Data, Infinity, etc.</a><ul>
<li class="chapter" data-level="4.4.1" data-path="data-structures.html"><a href="data-structures.html#infinity-and-nan"><i class="fa fa-check"></i><b>4.4.1</b> Infinity and NaN</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="data-structures.html"><a href="data-structures.html#data-frames"><i class="fa fa-check"></i><b>4.5</b> Data Frames</a><ul>
<li class="chapter" data-level="4.5.1" data-path="data-structures.html"><a href="data-structures.html#accessing-specific-elements-of-data-frames"><i class="fa fa-check"></i><b>4.5.1</b> Accessing specific elements of data frames</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="data-structures.html"><a href="data-structures.html#lists"><i class="fa fa-check"></i><b>4.6</b> Lists</a><ul>
<li class="chapter" data-level="4.6.1" data-path="data-structures.html"><a href="data-structures.html#accessing-specific-elements-of-lists"><i class="fa fa-check"></i><b>4.6.1</b> Accessing specific elements of lists</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="data-structures.html"><a href="data-structures.html#subsetting-with-logical-vectors"><i class="fa fa-check"></i><b>4.7</b> Subsetting with Logical Vectors</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html"><i class="fa fa-check"></i><b>5</b> Manipulating Data with <code>dplyr</code></a><ul>
<li class="chapter" data-level="5.1" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html#minnesota-tree-growth-data"><i class="fa fa-check"></i><b>5.1</b> Minnesota tree growth data</a></li>
<li class="chapter" data-level="5.2" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html#improved-data-frames"><i class="fa fa-check"></i><b>5.2</b> Improved Data Frames</a></li>
<li class="chapter" data-level="5.3" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html#filtering-data-by-row"><i class="fa fa-check"></i><b>5.3</b> Filtering Data By Row</a></li>
<li class="chapter" data-level="5.4" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html#selecting-variables-by-column"><i class="fa fa-check"></i><b>5.4</b> Selecting Variables by Column</a></li>
<li class="chapter" data-level="5.5" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html#pipes"><i class="fa fa-check"></i><b>5.5</b> Pipes</a></li>
<li class="chapter" data-level="5.6" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html#arranging-data-by-row"><i class="fa fa-check"></i><b>5.6</b> Arranging Data by Row</a></li>
<li class="chapter" data-level="5.7" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html#renaming-variables"><i class="fa fa-check"></i><b>5.7</b> Renaming Variables</a></li>
<li class="chapter" data-level="5.8" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html#creating-new-variables"><i class="fa fa-check"></i><b>5.8</b> Creating New Variables</a></li>
<li class="chapter" data-level="5.9" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html#data-summaries-and-grouping"><i class="fa fa-check"></i><b>5.9</b> Data Summaries and Grouping</a></li>
<li class="chapter" data-level="5.10" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html#counts"><i class="fa fa-check"></i><b>5.10</b> Counts</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="functions-and-programming.html"><a href="functions-and-programming.html"><i class="fa fa-check"></i><b>6</b> Functions and Programming</a><ul>
<li class="chapter" data-level="6.1" data-path="functions-and-programming.html"><a href="functions-and-programming.html#r-functions"><i class="fa fa-check"></i><b>6.1</b> R Functions</a></li>
<li class="chapter" data-level="6.2" data-path="functions-and-programming.html"><a href="functions-and-programming.html#programming-conditional-statements"><i class="fa fa-check"></i><b>6.2</b> Programming: Conditional Statements</a><ul>
<li class="chapter" data-level="6.2.1" data-path="functions-and-programming.html"><a href="functions-and-programming.html#comparison-and-logical-operators"><i class="fa fa-check"></i><b>6.2.1</b> Comparison and Logical Operators</a></li>
<li class="chapter" data-level="6.2.2" data-path="functions-and-programming.html"><a href="functions-and-programming.html#functions-with-multiple-returns"><i class="fa fa-check"></i><b>6.2.2</b> Functions with Multiple Returns</a></li>
<li class="chapter" data-level="6.2.3" data-path="functions-and-programming.html"><a href="functions-and-programming.html#creating-functions"><i class="fa fa-check"></i><b>6.2.3</b> Creating functions</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="functions-and-programming.html"><a href="functions-and-programming.html#more-on-functions"><i class="fa fa-check"></i><b>6.3</b> More on Functions</a><ul>
<li class="chapter" data-level="6.3.1" data-path="functions-and-programming.html"><a href="functions-and-programming.html#calling-functions"><i class="fa fa-check"></i><b>6.3.1</b> Calling Functions</a></li>
<li class="chapter" data-level="6.3.2" data-path="functions-and-programming.html"><a href="functions-and-programming.html#the-...-argument"><i class="fa fa-check"></i><b>6.3.2</b> The <code>...</code> Argument</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="working-with-data-sources.html"><a href="working-with-data-sources.html"><i class="fa fa-check"></i><b>7</b> Working with Data Sources</a><ul>
<li class="chapter" data-level="7.1" data-path="working-with-data-sources.html"><a href="working-with-data-sources.html#reading-data-into-r"><i class="fa fa-check"></i><b>7.1</b> Reading Data into R</a></li>
<li class="chapter" data-level="7.2" data-path="working-with-data-sources.html"><a href="working-with-data-sources.html#reading-data-with-missing-observations"><i class="fa fa-check"></i><b>7.2</b> Reading Data with missing observations</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html"><i class="fa fa-check"></i><b>8</b> Spatial Data Visualization and Analysis</a><ul>
<li class="chapter" data-level="8.1" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#overview"><i class="fa fa-check"></i><b>8.1</b> Overview</a><ul>
<li class="chapter" data-level="8.1.1" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#some-spatial-data-packages"><i class="fa fa-check"></i><b>8.1.1</b> Some Spatial Data Packages</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#motivating-data"><i class="fa fa-check"></i><b>8.2</b> Motivating Data</a></li>
<li class="chapter" data-level="8.3" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#reading-spatial-data-into-r"><i class="fa fa-check"></i><b>8.3</b> Reading Spatial Data into R</a></li>
<li class="chapter" data-level="8.4" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#coordinate-reference-systems"><i class="fa fa-check"></i><b>8.4</b> Coordinate Reference Systems</a></li>
<li class="chapter" data-level="8.5" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#ggmap"><i class="fa fa-check"></i><b>8.5</b> Illustration using <code>ggmap</code></a></li>
<li class="chapter" data-level="8.6" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#illustration-using-leaflet"><i class="fa fa-check"></i><b>8.6</b> Illustration using <code>leaflet</code></a></li>
<li class="chapter" data-level="8.7" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#subsetting-spatial-data"><i class="fa fa-check"></i><b>8.7</b> Subsetting Spatial Data</a><ul>
<li class="chapter" data-level="8.7.1" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#fetching-and-cropping-data-using-raster"><i class="fa fa-check"></i><b>8.7.1</b> Fetching and Cropping Data using <code>raster</code></a></li>
<li class="chapter" data-level="8.7.2" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#logical-index-and-name-subsetting"><i class="fa fa-check"></i><b>8.7.2</b> Logical, Index, and Name Subsetting</a></li>
<li class="chapter" data-level="8.7.3" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#spatial-subsetting-and-overlay"><i class="fa fa-check"></i><b>8.7.3</b> Spatial Subsetting and Overlay</a></li>
<li class="chapter" data-level="8.7.4" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#spatial-aggregation"><i class="fa fa-check"></i><b>8.7.4</b> Spatial Aggregation</a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#where-to-go-from-here"><i class="fa fa-check"></i><b>8.8</b> Where to go from here</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Forestry 472: Ecological Monitoring and Data Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-structures" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> Data Structures</h1>
<p>A data structure is a format for organizing and storing data. The structure is designed so that data can be accessed and worked with in specific ways. Statistical software and programming languages have methods (or functions) designed to operate on different kinds of data structures.</p>
<p>This chapter’s focus is on data structures. To help initial understanding, the data in this chapter will be relatively modest in size and complexity. The ideas and methods, however, generalize to larger and more complex data sets.</p>
<p>The base data structures in R are vectors, matrices, arrays, data frames, and lists. The first three, vectors, matrices, and arrays, are <em>homogeneous</em>, meaning that all elements are required to be of the same type (e.g., all numeric or all character). Data frames and lists are <em>heterogeneous</em>, allowing elements to be of different types (e.g., some elements of a data frame may be numeric while other elements may be character). These base structures can also be organized by their dimensionality, as shown in Table <a href="data-structures.html#tab:dataStructures">4.1</a>.</p>
<table>
<caption><span id="tab:dataStructures">TABLE 4.1: </span>Dimension and Type Content of Base Data Structures in R.</caption>
<thead>
<tr class="header">
<th align="left">Dimension</th>
<th align="left">Homogeneous</th>
<th align="left">Heterogeneous</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="left">Atomic Vector</td>
<td align="left">List</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="left">Matrix</td>
<td align="left">Data Frame</td>
</tr>
<tr class="odd">
<td align="left">N</td>
<td align="left">Array</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<p>R has no scalar types (0-dimensional). Individual numbers or strings are actually vectors of length one.</p>
<p>An efficient way to understand what comprises a given object is to use the <code>str()</code> function. <code>str()</code> is short for structure and prints a compact, human-readable description of any R data structure. For example, in the code below, we prove to ourselves that what we might think of as a scalar value is actually a vector of length one.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>a &lt;-<span class="st"> </span><span class="dv">1</span>
<span class="op">&gt;</span><span class="st"> </span><span class="kw">str</span>(a)</code></pre>
<pre><code> num 1</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">is.vector</span>(a)</code></pre>
<pre><code>[1] TRUE</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(a)</code></pre>
<pre><code>[1] 1</code></pre>
<p>Here we assigned <code>a</code> the scalar value one. The <code>str(a)</code> prints <code>num 1</code>, which says <code>a</code> is numeric of length one. Then just to be sure we used the function <code>is.vector()</code> to test if <code>a</code> is in fact a vector. Then, just for fun, we computed the length of <code>a</code> which again returns one. There are a set of similar logical tests for the other base data structures, e.g., <code>is.matrix()</code>, <code>is.array()</code>, <code>is.data.frame()</code>, and <code>is.list()</code>. These will all come in handy as we encounter different R objects.</p>
<div id="vectors" class="section level2">
<h2><span class="header-section-number">4.1</span> Vectors</h2>
<p>Think of a vector<a href="#fn17" class="footnote-ref" id="fnref17"><sup>17</sup></a> as a structure to represent one variable in a data set. For example a vector might hold the DBH, in inches, of six trees in a data set, and another vector might hold the species of those six trees. The <code>c()</code> function in R is useful for creating vectors and for modifying existing vectors. Think of <code>c</code> as standing for “combine”&quot; or “concatenate.”</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>dbh &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">20</span>, <span class="dv">18</span>, <span class="dv">13</span>, <span class="dv">16</span>, <span class="dv">10</span>, <span class="dv">14</span>)
<span class="op">&gt;</span><span class="st"> </span>dbh</code></pre>
<pre><code>[1] 20 18 13 16 10 14</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>spp &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Acer rubrum&quot;</span>, <span class="st">&quot;Acer rubrum&quot;</span>, <span class="st">&quot;Betula lenta&quot;</span>, <span class="st">&quot;Betula lenta&quot;</span>, 
<span class="op">+</span><span class="st">          &quot;Prunus serotina&quot;</span>, <span class="st">&quot;Prunus serotina&quot;</span>)
<span class="op">&gt;</span><span class="st"> </span>spp</code></pre>
<pre><code>[1] &quot;Acer rubrum&quot;     &quot;Acer rubrum&quot;    
[3] &quot;Betula lenta&quot;    &quot;Betula lenta&quot;   
[5] &quot;Prunus serotina&quot; &quot;Prunus serotina&quot;</code></pre>
<p>Notice that elements of a vector are separated by commas when using the <code>c()</code> function to create a vector. Also notice that character values are placed inside quotation marks.</p>
<p>The <code>c()</code> function also can be used to add to an existing vector. For example, if a seventh tree were included in the data set, and its DBH was 13 inches, the existing vectors could be modified as follows.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>dbh &lt;-<span class="st"> </span><span class="kw">c</span>(dbh, <span class="dv">13</span>)
<span class="op">&gt;</span><span class="st"> </span>spp &lt;-<span class="st"> </span><span class="kw">c</span>(spp, <span class="st">&quot;Acer rubrum&quot;</span>)
<span class="op">&gt;</span><span class="st"> </span>dbh</code></pre>
<pre><code>[1] 20 18 13 16 10 14 13</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>spp</code></pre>
<pre><code>[1] &quot;Acer rubrum&quot;     &quot;Acer rubrum&quot;    
[3] &quot;Betula lenta&quot;    &quot;Betula lenta&quot;   
[5] &quot;Prunus serotina&quot; &quot;Prunus serotina&quot;
[7] &quot;Acer rubrum&quot;    </code></pre>
<div id="types-conversion-and-coercion" class="section level3">
<h3><span class="header-section-number">4.1.1</span> Types, Conversion, and Coercion</h3>
<p>Clearly it is important to distinguish between different types of vectors. For example, it makes sense to ask R to calculate the mean of the DBH stored in <code>dbh</code>, but does not make sense to ask R to compute the mean of the species stored in <code>spp</code>. Vectors in R may have one of six different “types”: character, double, integer, logical, complex, and raw. Only the first four of these will be of interest below, and the distinction between double and integer will not be of great import. To illustrate logical vectors, imagine the field technician who measured the trees also indicated if the tree was acceptable growing stock (<code>ags</code>) and the call was coded as TRUE if the tree was acceptable and FALSE if the tree was not acceptable.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">typeof</span>(dbh)</code></pre>
<pre><code>[1] &quot;double&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">typeof</span>(spp)</code></pre>
<pre><code>[1] &quot;character&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>ags &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>)
<span class="op">&gt;</span><span class="st"> </span>ags</code></pre>
<pre><code>[1]  TRUE  TRUE FALSE  TRUE FALSE FALSE  TRUE</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">typeof</span>(ags)</code></pre>
<pre><code>[1] &quot;logical&quot;</code></pre>
<p>It may be surprising to see the DBH variable <code>dbh</code> is of type <code>double</code>, even though its values are all integers. By default R creates a double type vector when numeric values are given via the <code>c()</code> function.</p>
<p>When it makes sense, it is possible to convert vectors to a different type. Consider the following examples.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>dbh.int &lt;-<span class="st"> </span><span class="kw">as.integer</span>(dbh)
<span class="op">&gt;</span><span class="st"> </span>dbh.int</code></pre>
<pre><code>[1] 20 18 13 16 10 14 13</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">typeof</span>(dbh.int)</code></pre>
<pre><code>[1] &quot;integer&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>dbh.char &lt;-<span class="st"> </span><span class="kw">as.character</span>(dbh)
<span class="op">&gt;</span><span class="st"> </span>dbh.char</code></pre>
<pre><code>[1] &quot;20&quot; &quot;18&quot; &quot;13&quot; &quot;16&quot; &quot;10&quot; &quot;14&quot; &quot;13&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>ags.double &lt;-<span class="st"> </span><span class="kw">as.double</span>(ags)
<span class="op">&gt;</span><span class="st"> </span>ags.double</code></pre>
<pre><code>[1] 1 1 0 1 0 0 1</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>spp.oops &lt;-<span class="st"> </span><span class="kw">as.double</span>(spp)</code></pre>
<pre><code>Warning: NAs introduced by coercion</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>spp.oops</code></pre>
<pre><code>[1] NA NA NA NA NA NA NA</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">sum</span>(ags)</code></pre>
<pre><code>[1] 4</code></pre>
<p>The integer version of <code>dbh</code> doesn’t look any different, but it is stored differently, which can be important both for computational efficiency and for interfacing with other languages such as C++. As noted above, however, we will not worry about the distinction between integer and double types. Converting <code>dbh</code> to character goes as expected—the character representation of the numbers replace the numbers themselves. Converting the logical vector <code>ags</code> to double is pretty straightforward too—<code>FALSE</code> is converted to zero, and <code>TRUE</code> is converted to one. Now think about converting the character vector <code>spp</code> to a numeric double vector. It’s not at all clear how to represent “Acer rubrum” as a number. In fact in this case what R does is to create a double vector, but with each element set to <code>NA</code>, which is the representation of missing data.<a href="#fn18" class="footnote-ref" id="fnref18"><sup>18</sup></a> Finally consider the code <code>sum(ags)</code>. Now <code>ags</code> is a logical vector, but when R sees that we are asking to sum this logical vector, it automatically converts it to a numerical vector and then adds the zeros and ones representing FALSE and TRUE.</p>
<p>R also has functions to test whether a vector is of a particular type.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">is.double</span>(dbh)</code></pre>
<pre><code>[1] TRUE</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">is.character</span>(dbh)</code></pre>
<pre><code>[1] FALSE</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">is.integer</span>(dbh.int)</code></pre>
<pre><code>[1] TRUE</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">is.logical</span>(ags)</code></pre>
<pre><code>[1] TRUE</code></pre>
<div id="coercion" class="section level4">
<h4><span class="header-section-number">4.1.1.1</span> Coercion</h4>
<p>Consider the following examples.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>xx &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="ot">TRUE</span>)
<span class="op">&gt;</span><span class="st"> </span>xx</code></pre>
<pre><code>[1] 1 2 3 1</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>yy &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="st">&quot;dog&quot;</span>)
<span class="op">&gt;</span><span class="st"> </span>yy</code></pre>
<pre><code>[1] &quot;1&quot;   &quot;2&quot;   &quot;3&quot;   &quot;dog&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>zz &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="st">&quot;cat&quot;</span>)
<span class="op">&gt;</span><span class="st"> </span>zz</code></pre>
<pre><code>[1] &quot;TRUE&quot;  &quot;FALSE&quot; &quot;cat&quot;  </code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>dbh <span class="op">+</span><span class="st"> </span>ags</code></pre>
<pre><code>[1] 21 19 13 17 10 14 14</code></pre>
<p>Vectors in R can only contain elements of one type. If more than one type is included in a <code>c()</code> function, R silently <em>coerces</em> the vector to be of one type. The examples illustrate the hierarchy—if any element is a character, then the whole vector is character. If some elements are numeric (either integer or double) and other elements are logical, then the whole vector is numeric. Note what happened when R was asked to add the numeric vector <code>dbh</code> to the logical vector <code>ags</code>. The logical vector was silently coerced to be numeric, so that FALSE became zero and TRUE became one, and then the two numeric vectors were added.</p>
</div>
</div>
<div id="accessing-specific-elements-of-vectors" class="section level3">
<h3><span class="header-section-number">4.1.2</span> Accessing Specific Elements of Vectors</h3>
<p>To access and possibly change specific elements of vectors, refer to the position of the element in square brackets. For example, <code>dbh[4]</code> refers to the fourth element of the vector <code>dbh</code>. Note that R starts the numbering of elements at 1, i.e., the first element of a vector <code>x</code> is <code>x[1]</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>dbh</code></pre>
<pre><code>[1] 20 18 13 16 10 14 13</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>dbh[<span class="dv">5</span>]</code></pre>
<pre><code>[1] 10</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>dbh[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]</code></pre>
<pre><code>[1] 20 18 13</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(dbh)</code></pre>
<pre><code>[1] 7</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>dbh[<span class="kw">length</span>(dbh)]</code></pre>
<pre><code>[1] 13</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>dbh[]</code></pre>
<pre><code>[1] 20 18 13 16 10 14 13</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>dbh[<span class="dv">3</span>] &lt;-<span class="st"> </span><span class="dv">202</span>  <span class="co">##crazy big tree</span>
<span class="op">&gt;</span><span class="st"> </span>dbh</code></pre>
<pre><code>[1]  20  18 202  16  10  14  13</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>dbh[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">16</span>, <span class="dv">8</span>, <span class="dv">2</span>)
<span class="op">&gt;</span><span class="st"> </span>dbh</code></pre>
<pre><code>[1] 16  8  2 16 10 14 13</code></pre>
<p>Note that including nothing in the square brackets results in the whole vector being returned. We can also assign values to vectors by accessing the position(s) where the new values will be assigned. For example, in the above code chunk <code>dbh[3]</code> is changed to 202, then the values in the first three elements of <code>dbh</code> are changed to 10, 8, and 2, respectively.</p>
<p>Negative numbers in the square brackets tell R to omit the corresponding value. And a zero as a subscript returns nothing (more precisely, it returns a length zero vector of the appropriate type).</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>dbh[<span class="op">-</span><span class="dv">3</span>]</code></pre>
<pre><code>[1] 16  8 16 10 14 13</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>dbh[<span class="op">-</span><span class="kw">length</span>(dbh)]</code></pre>
<pre><code>[1] 16  8  2 16 10 14</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>fewer.dbh &lt;-<span class="st"> </span>dbh[<span class="op">-</span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)]
<span class="op">&gt;</span><span class="st"> </span>fewer.dbh</code></pre>
<pre><code>[1]  8 16 14 13</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>dbh[<span class="dv">0</span>]</code></pre>
<pre><code>numeric(0)</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>dbh[<span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">1</span>)]</code></pre>
<pre><code>[1]  8 16</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>dbh[<span class="kw">c</span>(<span class="op">-</span><span class="dv">1</span>, <span class="dv">2</span>)]</code></pre>
<pre><code>Error in dbh[c(-1, 2)]: only 0&#39;s may be mixed with negative subscripts</code></pre>
<p>Note that mixing zero and other nonzero subscripts is allowed, but mixing negative and positive subscripts is not allowed.</p>
<p>What about the (usual) case where we don’t know the positions of the elements we want? For example possibly we want the DBH of all acceptable growing stock trees in the data. Later we will learn how to subset using logical indices, which is a very powerful way to access desired elements of a vector.<a href="#fn19" class="footnote-ref" id="fnref19"><sup>19</sup></a></p>
</div>
</div>
<div id="factors" class="section level2">
<h2><span class="header-section-number">4.2</span> Factors</h2>
<p>Categorical variables such as <code>spp</code> can be represented as character vectors. In many cases this simple representation is sufficient. Consider, however, two other categorical variables, one representing crown class <code>S</code>, <code>I</code>, <code>C</code>, and <code>D</code> (i.e., <strong>S</strong>uppressed, <strong>I</strong>ntermediate, <strong>C</strong>odominate, <strong>D</strong>ominant), and another representing grade of the first log via categories <code>Grade 1</code>, <code>Grade 2</code>, and <code>Grade 3</code>. Suppose that for the small data set considered here, all trees are either dominant or codominant crown class. If we just represented the variable via a character vector, there would be no way to know that there are two other categories, representing suppressed and intermediate, because they happen to not be present in the data set. In addition, for the log grade variable the character vector representation does not explicitly indicate that there is an ordering of the levels.</p>
<p>Factors in R provide a more sophisticated way to represent categorical variables. Factors explicitly contain all possible levels, and allow ordering of levels.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>crown.class &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;D&quot;</span>, <span class="st">&quot;D&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;D&quot;</span>, <span class="st">&quot;D&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;C&quot;</span>)
<span class="op">&gt;</span><span class="st"> </span>grade &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Grade 1&quot;</span>, <span class="st">&quot;Grade 1&quot;</span>, <span class="st">&quot;Grade 3&quot;</span>, <span class="st">&quot;Grade 2&quot;</span>, <span class="st">&quot;Grade 3&quot;</span>, 
<span class="op">+</span><span class="st">   &quot;Grade 3&quot;</span>, <span class="st">&quot;Grade 2&quot;</span>)
<span class="op">&gt;</span><span class="st"> </span>crown.class</code></pre>
<pre><code>[1] &quot;D&quot; &quot;D&quot; &quot;C&quot; &quot;D&quot; &quot;D&quot; &quot;C&quot; &quot;C&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>grade</code></pre>
<pre><code>[1] &quot;Grade 1&quot; &quot;Grade 1&quot; &quot;Grade 3&quot; &quot;Grade 2&quot; &quot;Grade 3&quot;
[6] &quot;Grade 3&quot; &quot;Grade 2&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>crown.class &lt;-<span class="st"> </span><span class="kw">factor</span>(crown.class, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;I&quot;</span>, 
<span class="op">+</span><span class="st">   &quot;C&quot;</span>, <span class="st">&quot;D&quot;</span>))
<span class="op">&gt;</span><span class="st"> </span>crown.class</code></pre>
<pre><code>[1] D D C D D C C
Levels: S I C D</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>grade &lt;-<span class="st"> </span><span class="kw">factor</span>(grade, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;Grade 1&quot;</span>, <span class="st">&quot;Grade 2&quot;</span>, 
<span class="op">+</span><span class="st">   &quot;Grade 3&quot;</span>), <span class="dt">ordered =</span> <span class="ot">TRUE</span>)
<span class="op">&gt;</span><span class="st"> </span>grade</code></pre>
<pre><code>[1] Grade 1 Grade 1 Grade 3 Grade 2 Grade 3 Grade 3
[7] Grade 2
Levels: Grade 1 &lt; Grade 2 &lt; Grade 3</code></pre>
<p>In the factor version of crown class the levels are explicitly listed, so it is clear that the two included levels are not all the possible levels. In the factor version of log grade, the ordering is explicit as well.</p>
<p>In many cases the character vector representation of a categorical variable is sufficient and easier to work with. In this book factors will not be used extensively. It is important to note that R often by default creates a factor when character data are read in, and sometimes it is necessary to use the argument <code>stringsAsFactors = FALSE</code> to explicitly tell R not to do this. This will be seen below when data frames are introduced.</p>
</div>
<div id="names-of-objects-in-r" class="section level2">
<h2><span class="header-section-number">4.3</span> Names of objects in R</h2>
<p>Continuing the discussion about code quality from Section <a href="introduction-to-r-and-rstudio.html#quality-of-r-code">2.7</a>, there are a few hard and fast restrictions on the names of objects (such as vectors) in R. Note also that there are good practices, and things to avoid.</p>
<p>From the help page for <code>make.names</code> in R, the name of an R object is “syntactically valid” if the name “consists of letters, numbers and the dot or underline characters and starts with a letter or the dot not followed by a number” and is not one of the “reserved words” in R such as <code>if</code>, <code>TRUE</code>, <code>function</code>, etc. For example, <code>c45t.le_dog</code> and <code>.ty56</code> are both syntactically valid (although not very good names) while <code>4DislikeCats</code> and <code>log#@sparty</code> are not.</p>
<p>A few important comments about naming objects follow:</p>
<ol style="list-style-type: decimal">
<li>It is important to be aware that names of objects in R are case-sensitive, so <code>dbh</code> and <code>DBH</code> do not refer to the same object.</li>
</ol>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>dbh</code></pre>
<pre><code>[1] 16  8  2 16 10 14 13</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>DBH</code></pre>
<pre><code>Error in eval(expr, envir, enclos): object &#39;DBH&#39; not found</code></pre>
<ol start="2" style="list-style-type: decimal">
<li><p>It is unwise to create an object with the same name as a built-in R object such as the function <code>c</code> or the function <code>mean</code>. In earlier versions of R this could be somewhat disastrous, but even in current versions, it is definitely not a good idea!</p></li>
<li>As much as possible, choose names that are informative. When creating a variable you may initially remember that <code>x</code> contains DBH and <code>y</code> contains crown class, but after a few hours, days, or weeks, you probably will forget this. Better options are <code>dbh</code> and <code>crown.class</code>.</li>
<li><p>As much as possible, be consistent in how you name objects. In particular, decide how to separate multi-word names. Some options include:</p>
<ul>
<li>Using case to separate: <code>CrownClass</code> or <code>crownClass</code> for example</li>
<li>Using underscores to separate: <code>crown_class</code> for example</li>
<li>Using a period to separate: <code>crown.class</code> for example</li>
</ul></li>
</ol>
</div>
<div id="missing-data-infinity-etc." class="section level2">
<h2><span class="header-section-number">4.4</span> Missing Data, Infinity, etc.</h2>
<p>Most real-world data sets have variables where some observations are missing. In longitudinal studies of tree growth (i.e., where trees are measured over time), it is common that trees die or cannot be located in subsequent remeasurements. Statistical software should be able to represent missing data and to analyze data sets in which some data are missing.</p>
<p>In R, the value <code>NA</code> is used for a missing data value. Since missing values may occur in numeric, character, and other types of data, and since R requires that a vector contain only elements of one type, there are different types of <code>NA</code> values. Usually R determines the appropriate type of <code>NA</code> value automatically. It is worth noting the default type for <code>NA</code> is logical, and that <code>NA</code> is NOT the same as the character string <code>&quot;NA&quot;</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>missingCharacter &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;dog&quot;</span>, <span class="st">&quot;cat&quot;</span>, <span class="ot">NA</span>, <span class="st">&quot;pig&quot;</span>, <span class="ot">NA</span>, <span class="st">&quot;horse&quot;</span>)
<span class="op">&gt;</span><span class="st"> </span>missingCharacter</code></pre>
<pre><code>[1] &quot;dog&quot;   &quot;cat&quot;   NA      &quot;pig&quot;   NA      &quot;horse&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">is.na</span>(missingCharacter)</code></pre>
<pre><code>[1] FALSE FALSE  TRUE FALSE  TRUE FALSE</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>missingCharacter &lt;-<span class="st"> </span><span class="kw">c</span>(missingCharacter, <span class="st">&quot;NA&quot;</span>)
<span class="op">&gt;</span><span class="st"> </span>missingCharacter</code></pre>
<pre><code>[1] &quot;dog&quot;   &quot;cat&quot;   NA      &quot;pig&quot;   NA      &quot;horse&quot;
[7] &quot;NA&quot;   </code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">is.na</span>(missingCharacter)</code></pre>
<pre><code>[1] FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>allMissing &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">typeof</span>(allMissing)</code></pre>
<pre><code>[1] &quot;logical&quot;</code></pre>
<p>How should missing data be treated in computations, such as finding the mean or standard deviation of a variable? One possibility is to return <code>NA</code>. Another is to remove the missing value(s) and then perform the computation.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">mean</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="ot">NA</span>, <span class="dv">5</span>))</code></pre>
<pre><code>[1] NA</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">mean</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="ot">NA</span>, <span class="dv">5</span>), <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre>
<pre><code>[1] 2.75</code></pre>
<p>As this example shows, the default behavior for the <code>mean()</code> function is to return <code>NA</code>. If removal of the missing values and then computing the mean is desired, the argument <code>na.rm</code> is set to <code>TRUE</code>. Different R functions have different default behaviors, and there are other possible actions. Consulting the help for a function provides the details.</p>
<div id="infinity-and-nan" class="section level3">
<h3><span class="header-section-number">4.4.1</span> Infinity and NaN</h3>
<p>What happens if R code requests division by zero, or results in a number that is too large to be represented? Here are some examples.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>x &lt;-<span class="st"> </span><span class="dv">0</span><span class="op">:</span><span class="dv">4</span>
<span class="op">&gt;</span><span class="st"> </span>x</code></pre>
<pre><code>[1] 0 1 2 3 4</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span><span class="op">/</span>x</code></pre>
<pre><code>[1]    Inf 1.0000 0.5000 0.3333 0.2500</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>x<span class="op">/</span>x</code></pre>
<pre><code>[1] NaN   1   1   1   1</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>y &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">10</span>, <span class="dv">1000</span>, <span class="dv">10000</span>)
<span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span><span class="op">^</span>y</code></pre>
<pre><code>[1]  1.024e+03 1.072e+301        Inf</code></pre>
<p><code>Inf</code> and <code>-Inf</code> represent infinity and negative infinity (and numbers which are too large in magnitude to be represented as floating point numbers). <code>NaN</code> represents the result of a calculation where the result is undefined, such as dividing zero by zero. All of these are common to a variety of programming languages, including R.</p>
</div>
</div>
<div id="data-frames" class="section level2">
<h2><span class="header-section-number">4.5</span> Data Frames</h2>
<p>Commonly data is rectangular in form, with variables as columns and cases as rows. Continuing with the species, DBH, and acceptable growing stock data, each of those variables would be a column of the data set, and each tree’s measurements would be a row. In R, such data are represented as a <em>data frame</em>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>trees &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">Spp=</span>spp, <span class="dt">Dbh=</span>dbh, <span class="dt">Ags=</span>ags, 
<span class="op">+</span><span class="st">                     </span><span class="dt">stringsAsFactors=</span><span class="ot">FALSE</span>)
<span class="op">&gt;</span><span class="st"> </span>trees</code></pre>
<pre><code>              Spp Dbh   Ags
1     Acer rubrum  16  TRUE
2     Acer rubrum   8  TRUE
3    Betula lenta   2 FALSE
4    Betula lenta  16  TRUE
5 Prunus serotina  10 FALSE
6 Prunus serotina  14 FALSE
7     Acer rubrum  13  TRUE</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">names</span>(trees)</code></pre>
<pre><code>[1] &quot;Spp&quot; &quot;Dbh&quot; &quot;Ags&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">colnames</span>(trees)</code></pre>
<pre><code>[1] &quot;Spp&quot; &quot;Dbh&quot; &quot;Ags&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">names</span>(trees) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;species&quot;</span>, <span class="st">&quot;DBH&quot;</span>, <span class="st">&quot;good.stock&quot;</span>)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">colnames</span>(trees)</code></pre>
<pre><code>[1] &quot;species&quot;    &quot;DBH&quot;        &quot;good.stock&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">rownames</span>(trees)</code></pre>
<pre><code>[1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; &quot;5&quot; &quot;6&quot; &quot;7&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">names</span>(trees) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;spp&quot;</span>, <span class="st">&quot;dbh&quot;</span>, <span class="st">&quot;ags&quot;</span>)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">dim</span>(trees)</code></pre>
<pre><code>[1] 7 3</code></pre>
<p>The <code>data.frame</code> function can be used to create a data frame (although it’s more common to read a data frame into R from an external file, something that will be introduced later). The names of the variables in the data frame are given as arguments, as are the vectors of data that make up the variable’s values. The argument <code>stringsAsFactors=FALSE</code> asks R not to convert character vectors into factors, which R does by default, to the dismay of many users. Names of the columns (variables) can be extracted and set via either <code>names</code> or <code>colnames</code>. In the example, the variable names are changed to <code>species, DBH, good.stock</code> and then changed back to what I like better <code>spp, dbh, ags</code> in this way. Rows can be named also. In this case since specific row names were not provided the default row names of <code>&quot;1&quot;, &quot;2&quot;</code>, etc. are used. Finally, I take a look at the data frame’s dimensions (where the <code>dim</code> function returns a vector comprised of number of rows and number of columns, respectively). Also, try the functions <code>nrow</code> and <code>ncol</code> on the data frame and see what happens.</p>
<p>In the next example a built-in R data set called <code>Loblolly</code> is made available by the <code>data</code> function, and then the first and last six rows are displayed using <code>head</code> and <code>tail</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">data</span>(<span class="st">&quot;Loblolly&quot;</span>)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(Loblolly)</code></pre>
<pre><code>   height age Seed
1    4.51   3  301
15  10.89   5  301
29  28.72  10  301
43  41.74  15  301
57  52.70  20  301
71  60.92  25  301</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">tail</span>(Loblolly)</code></pre>
<pre><code>   height age Seed
14   3.46   3  331
28   9.05   5  331
42  25.85  10  331
56  39.15  15  331
70  49.12  20  331
84  59.49  25  331</code></pre>
<p>Note the <code>Loblolly</code> data frame has row names that are not ordered (which really doesn’t matter) and simply suggests the data set author might have subset these data from a larger data set or sorted them by a variable, e.g., <code>height</code> or <code>age</code>. Row names can be generally ignored (unless they hold some specific meaning). Find out more about the Loblolly data set by running <code>?Loblolly</code> on the command line or, equivalently, looking it up in the RStudio’s search window on the help tab.</p>
<div id="accessing-specific-elements-of-data-frames" class="section level3">
<h3><span class="header-section-number">4.5.1</span> Accessing specific elements of data frames</h3>
<p>Data frames are two-dimensional, so to access a specific element (or elements) we need to specify both the row and column indices.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>Loblolly[<span class="dv">1</span>, <span class="dv">3</span>]</code></pre>
<pre><code>[1] 301
14 Levels: 329 &lt; 327 &lt; 325 &lt; 307 &lt; 331 &lt; ... &lt; 305</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>Loblolly[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">3</span>]</code></pre>
<pre><code>[1] 301 301 301
14 Levels: 329 &lt; 327 &lt; 325 &lt; 307 &lt; 331 &lt; ... &lt; 305</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>Loblolly[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">2</span><span class="op">:</span><span class="dv">3</span>]</code></pre>
<pre><code>   age Seed
1    3  301
15   5  301
29  10  301</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>Loblolly[, <span class="dv">1</span>]</code></pre>
<pre><code> [1]  4.51 10.89 28.72 41.74 52.70 60.92  4.55 10.92
 [9] 29.07 42.83 53.88 63.39  4.79 11.37 30.21 44.40
[17] 55.82 64.10  3.91  9.48 25.66 39.07 50.78 59.07
[25]  4.81 11.20 28.66 41.66 53.31 63.05  3.88  9.40
[33] 25.99 39.55 51.46 59.64  4.32 10.43 27.16 40.85
[41] 51.33 60.07  4.57 10.57 27.90 41.13 52.43 60.69
[49]  3.77  9.03 25.45 38.98 49.76 60.28  4.33 10.79
[57] 28.97 42.44 53.17 61.62  4.38 10.48 27.93 40.20
[65] 50.06 58.49  4.12  9.92 26.54 37.82 48.43 56.81
[73]  3.93  9.34 26.08 37.79 48.31 56.43  3.46  9.05
[81] 25.85 39.15 49.12 59.49</code></pre>
<p>Note that <code>Loblolly[,1]</code> returns ALL elements in the first column. This agrees with the behavior for vectors, where leaving a subscript out of the square brackets tells R to return all values. In this case we are telling R to return all rows, and the first column.</p>
<p>As we have seen in class, we can also access the columns (or rows) using their names.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>Loblolly[<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="st">&quot;height&quot;</span>]</code></pre>
<pre><code>[1]  4.51 10.89 28.72 41.74</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>Loblolly[<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="kw">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;Seed&quot;</span>)]</code></pre>
<pre><code>   age Seed
1    3  301
15   5  301
29  10  301
43  15  301</code></pre>
<p>For a data frame there is another way to access specific columns, using the <code>$</code> notation.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>Loblolly<span class="op">$</span>height</code></pre>
<pre><code> [1]  4.51 10.89 28.72 41.74 52.70 60.92  4.55 10.92
 [9] 29.07 42.83 53.88 63.39  4.79 11.37 30.21 44.40
[17] 55.82 64.10  3.91  9.48 25.66 39.07 50.78 59.07
[25]  4.81 11.20 28.66 41.66 53.31 63.05  3.88  9.40
[33] 25.99 39.55 51.46 59.64  4.32 10.43 27.16 40.85
[41] 51.33 60.07  4.57 10.57 27.90 41.13 52.43 60.69
[49]  3.77  9.03 25.45 38.98 49.76 60.28  4.33 10.79
[57] 28.97 42.44 53.17 61.62  4.38 10.48 27.93 40.20
[65] 50.06 58.49  4.12  9.92 26.54 37.82 48.43 56.81
[73]  3.93  9.34 26.08 37.79 48.31 56.43  3.46  9.05
[81] 25.85 39.15 49.12 59.49</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>Loblolly<span class="op">$</span>age</code></pre>
<pre><code> [1]  3  5 10 15 20 25  3  5 10 15 20 25  3  5 10 15 20
[18] 25  3  5 10 15 20 25  3  5 10 15 20 25  3  5 10 15
[35] 20 25  3  5 10 15 20 25  3  5 10 15 20 25  3  5 10
[52] 15 20 25  3  5 10 15 20 25  3  5 10 15 20 25  3  5
[69] 10 15 20 25  3  5 10 15 20 25  3  5 10 15 20 25</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>height</code></pre>
<pre><code>Error in eval(expr, envir, enclos): object &#39;height&#39; not found</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>age</code></pre>
<pre><code>Error in eval(expr, envir, enclos): object &#39;age&#39; not found</code></pre>
<p>Notice that typing the variable name, such as <code>height</code>, without the name of the data frame (and a dollar sign) as a prefix, does not work. This is sensible. There may be several data frames that have variables named <code>height</code>, and just typing <code>height</code> doesn’t provide enough information to know which is desired.</p>
</div>
</div>
<div id="lists" class="section level2">
<h2><span class="header-section-number">4.6</span> Lists</h2>
<p>The third main data structure we will work with is a list. Technically a list is a vector, but one in which elements can be of different types. For example a list may have one element that is a vector, one element that is a data frame, and another element that is a function. Consider designing a function that fits a simple linear regression model to two quantitative variables. We might want that function to compute and return several things such as</p>
<ul>
<li>The fitted slope and intercept (a numeric vector with two components)</li>
<li>The residuals (a numeric vector with <span class="math inline">\(n\)</span> components, where <span class="math inline">\(n\)</span> is the number of data points)</li>
<li>Fitted values for the data (a numeric vector with <span class="math inline">\(n\)</span> components, where <span class="math inline">\(n\)</span> is the number of data points)</li>
<li>The names of the dependent and independent variables (a character vector with two components)</li>
</ul>
<p>In fact R has a function, <code>lm</code>, which does this (and much more).</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>htAgeLinMod &lt;-<span class="st"> </span><span class="kw">lm</span>(height <span class="op">~</span><span class="st"> </span>age, <span class="dt">data =</span> Loblolly)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">mode</span>(htAgeLinMod)</code></pre>
<pre><code>[1] &quot;list&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">names</span>(htAgeLinMod)</code></pre>
<pre><code> [1] &quot;coefficients&quot;  &quot;residuals&quot;     &quot;effects&quot;      
 [4] &quot;rank&quot;          &quot;fitted.values&quot; &quot;assign&quot;       
 [7] &quot;qr&quot;            &quot;df.residual&quot;   &quot;xlevels&quot;      
[10] &quot;call&quot;          &quot;terms&quot;         &quot;model&quot;        </code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>htAgeLinMod<span class="op">$</span>coefficients</code></pre>
<pre><code>(Intercept)         age 
     -1.312       2.591 </code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">tail</span>(htAgeLinMod<span class="op">$</span>residuals)</code></pre>
<pre><code>    14     28     42     56     70     84 
-2.999 -2.590  1.257  1.605 -1.378 -3.961 </code></pre>
<p>The <code>lm</code> function returns a list (which in the code above has been assigned to the object <code>htAgeLinMod</code>)<a href="#fn20" class="footnote-ref" id="fnref20"><sup>20</sup></a>. One component of the list is the length 2 vector of coefficients, while another component is the length 84 vector of residuals. The code also illustrates that named components of a list can be accessed using the dollar sign notation, as with data frames.</p>
<p>The <code>list</code> function is used to create lists.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>temporaryList &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">first =</span> dbh, <span class="dt">second =</span> trees, <span class="dt">pickle =</span> <span class="kw">list</span>(<span class="dt">a =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, 
<span class="op">+</span><span class="st">   </span><span class="dt">b =</span> trees))
<span class="op">&gt;</span><span class="st"> </span>temporaryList</code></pre>
<pre><code>$first
[1] 16  8  2 16 10 14 13

$second
              spp dbh   ags
1     Acer rubrum  16  TRUE
2     Acer rubrum   8  TRUE
3    Betula lenta   2 FALSE
4    Betula lenta  16  TRUE
5 Prunus serotina  10 FALSE
6 Prunus serotina  14 FALSE
7     Acer rubrum  13  TRUE

$pickle
$pickle$a
 [1]  1  2  3  4  5  6  7  8  9 10

$pickle$b
              spp dbh   ags
1     Acer rubrum  16  TRUE
2     Acer rubrum   8  TRUE
3    Betula lenta   2 FALSE
4    Betula lenta  16  TRUE
5 Prunus serotina  10 FALSE
6 Prunus serotina  14 FALSE
7     Acer rubrum  13  TRUE</code></pre>
<p>Here, for illustration, I assembled a list to hold some of the R data structures we have been working with in this chapter. The first list element, named <code>first</code>, holds the <code>dbh</code> vector we created in Section <a href="data-structures.html#vectors">4.1</a>. The second list element, named <code>second</code>, holds the <code>trees</code> data frame. The third list element, named <code>pickle</code>, holds a list with elements named <code>a</code> and <code>b</code> that hold a vector of values 1 through 10, and another copy of the <code>trees</code> data set, respectively. As this example shows, a list can contain another list.</p>
<div id="accessing-specific-elements-of-lists" class="section level3">
<h3><span class="header-section-number">4.6.1</span> Accessing specific elements of lists</h3>
<p>We already have seen the dollar sign notation works for lists. In addition, the square bracket subsetting notation can be used. But with lists there is an added somewhat subtle wrinkle—using either single or double square brackets.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>temporaryList<span class="op">$</span>first</code></pre>
<pre><code>[1] 16  8  2 16 10 14 13</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">mode</span>(temporaryList<span class="op">$</span>first)</code></pre>
<pre><code>[1] &quot;numeric&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>temporaryList[[<span class="dv">1</span>]]</code></pre>
<pre><code>[1] 16  8  2 16 10 14 13</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">mode</span>(temporaryList[[<span class="dv">1</span>]])</code></pre>
<pre><code>[1] &quot;numeric&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>temporaryList[<span class="dv">1</span>]</code></pre>
<pre><code>$first
[1] 16  8  2 16 10 14 13</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">mode</span>(temporaryList[<span class="dv">1</span>])</code></pre>
<pre><code>[1] &quot;list&quot;</code></pre>
<p>Note the dollar sign and double bracket notation return a numeric vector, while the single bracket notation returns a list. Notice also the difference in results below.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>temporaryList[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)]</code></pre>
<pre><code>$first
[1] 16  8  2 16 10 14 13

$second
              spp dbh   ags
1     Acer rubrum  16  TRUE
2     Acer rubrum   8  TRUE
3    Betula lenta   2 FALSE
4    Betula lenta  16  TRUE
5 Prunus serotina  10 FALSE
6 Prunus serotina  14 FALSE
7     Acer rubrum  13  TRUE</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>temporaryList[[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)]]</code></pre>
<pre><code>[1] 8</code></pre>
<p>The single bracket form returns the first and second elements of the list, while the double bracket form returns the second element in the first element of the list. Generally, do not put a vector of indices or names in a double bracket, you will likely get unexpected results. See, for example, the results below.<a href="#fn21" class="footnote-ref" id="fnref21"><sup>21</sup></a></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>temporaryList[[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)]]</code></pre>
<pre><code>Error in temporaryList[[c(1, 2, 3)]]: recursive indexing failed at level 2</code></pre>
<p>So, in summary, there are two main differences between using the single bracket <code>[]</code> and double bracket <code>[[]]</code>. First, the single bracket will return a list that holds the object(s) held at the given indices or names placed in the bracket, whereas the double brackets will return the actual object held at the index or name placed in the innermost bracket. Put differently, a single bracket can be used to access a range of list elements and will return a list, while a double bracket can only access a single element in the list and will return the object held at the index.</p>
</div>
</div>
<div id="subsetting-with-logical-vectors" class="section level2">
<h2><span class="header-section-number">4.7</span> Subsetting with Logical Vectors</h2>
<p>Consider the <code>Loblolly</code> data frame. How can we access only those trees with heights more than 50 m? How can we access the age of those trees taller than 50 m? How can we compute the mean height of all trees from seed source 301? The data set is small enough that it would not be too onerous to extract the values by hand. But for larger or more complex data sets, this would be very difficult or impossible to do in a reasonable amount of time, and would likely result in errors.</p>
<p>R has a powerful method for solving these sorts of problems using a variant of the subsetting methods that we already have learned. When given a logical vector in square brackets, R will return the values corresponding to <code>TRUE</code>. To begin, focus on the <code>dbh</code> and <code>spp</code> vectors created in Section <a href="data-structures.html#vectors">4.1</a>.</p>
<p>The R code <code>dbh &gt; 15</code> returns <code>TRUE</code> for each value of <code>dbh</code> that is more than 15, and a <code>FALSE</code> for each value of <code>dbh</code> that is less than or equal to 15. Similarly <code>spp == &quot;Betula lenta&quot;</code> returns <code>TRUE</code> or <code>FALSE</code> depending on whether an element of <code>spp</code> is equal to <code>Betula lenta</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>dbh</code></pre>
<pre><code>[1] 16  8  2 16 10 14 13</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>dbh <span class="op">&gt;</span><span class="st"> </span><span class="dv">15</span></code></pre>
<pre><code>[1]  TRUE FALSE FALSE  TRUE FALSE FALSE FALSE</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>spp[dbh <span class="op">&gt;</span><span class="st"> </span><span class="dv">15</span>]</code></pre>
<pre><code>[1] &quot;Acer rubrum&quot;  &quot;Betula lenta&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>dbh[dbh <span class="op">&gt;</span><span class="st"> </span><span class="dv">15</span>]</code></pre>
<pre><code>[1] 16 16</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>spp <span class="op">==</span><span class="st"> &quot;Betula lenta&quot;</span></code></pre>
<pre><code>[1] FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>dbh[spp <span class="op">==</span><span class="st"> &quot;Betula lenta&quot;</span>]</code></pre>
<pre><code>[1]  2 16</code></pre>
<p>Consider the lines of R code one by one.</p>
<ul>
<li><code>dbh</code> instructs R to display the values in the vector <code>dbh</code>.</li>
<li><code>dbh &gt; 15</code> instructs R to check whether each value in <code>dbh</code> is greater than 15, and to return <code>TRUE</code> if so, and <code>FALSE</code> otherwise.</li>
<li>The next line, <code>spp[dbh &gt; 15]</code>, does two things. First, inside the square brackets, it does the same thing as the second line: it returns <code>TRUE</code> or <code>FALSE</code> depending on whether a value of <code>dbh</code> is or is not greater than 15. Second, each element of <code>spp</code> is matched with the corresponding <code>TRUE</code> or <code>FALSE</code> value, and is returned if and only if the corresponding value is <code>TRUE</code>. For example the first value of <code>spp</code> is Acer rubrum. Since the first <code>TRUE</code> or <code>FALSE</code> value is <code>TRUE</code>, the first value of <code>spp</code> is returned. So this line of code returns the species names for all trees with DBH greater than 15; hence, the first and the fourth values of <code>spp</code> are returned.</li>
<li>The fourth line of code, <code>dbh[dbh &gt; 15]</code>, again begins by returning <code>TRUE</code> or <code>FALSE</code> depending on whether elements of <code>dbh</code> are larger than 15. Then those elements of <code>dbh</code> corresponding to <code>TRUE</code> values are returned. So this line of code returns the DBH of all trees whose DBH is greater than 15.</li>
<li>The fifth line returns <code>TRUE</code> or <code>FALSE</code> depending on whether elements of <code>spp</code> are equal to <code>Betula lenta</code> or not.</li>
<li>The sixth line returns the DBH of those all Betula lenta trees.</li>
</ul>
<p>There are six comparison operators in R, <code>&gt;, &lt;, &gt;=, &lt;=, ==, !=</code>. Note that to test for equality a “double equals sign”&quot; is used, while <code>!=</code> tests for inequality.</p>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="17">
<li id="fn17"><p>Technically the objects described in this section are “atomic” vectors (all elements of the same type), since lists are also actually vectors. This will not be an important issue in this course, and the shorter term vector will be used for atomic vectors.<a href="data-structures.html#fnref17" class="footnote-back">↩</a></p></li>
<li id="fn18"><p>Missing data will be discussed in more detail later in the chapter.<a href="data-structures.html#fnref18" class="footnote-back">↩</a></p></li>
<li id="fn19"><p>We had a prelude to this in the temperature data exercise.<a href="data-structures.html#fnref19" class="footnote-back">↩</a></p></li>
<li id="fn20"><p>The <code>mode</code> function returns the the type or storage mode of an object.<a href="data-structures.html#fnref20" class="footnote-back">↩</a></p></li>
<li id="fn21"><p>Try this example using only single brackets<span class="math inline">\(\ldots\)</span> it will return a list holding elements <code>first</code>, <code>second</code>, and <code>pickle</code>.<a href="data-structures.html#fnref21" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="scripts-r-markdown-and-reproducible-research.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="manipulating-data-with-dplyr.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["bookdown.pdf"],
"toc": {
"collapse": "none"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
