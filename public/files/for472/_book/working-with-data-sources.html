<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Working with Data Sources | Forestry 472: Ecological Monitoring and Data Analysis</title>
  <meta name="description" content="Course book for FOR472: Ecological Monitoring and Data Analysis" />
  <meta name="generator" content="bookdown 0.10 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Working with Data Sources | Forestry 472: Ecological Monitoring and Data Analysis" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Course book for FOR472: Ecological Monitoring and Data Analysis" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Working with Data Sources | Forestry 472: Ecological Monitoring and Data Analysis" />
  
  <meta name="twitter:description" content="Course book for FOR472: Ecological Monitoring and Data Analysis" />
  

<meta name="author" content="Andrew O. Finley and Jeffrey W. Doser" />


<meta name="date" content="2019-05-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="functions-and-programming.html">
<link rel="next" href="spatial-data-visualization-and-analysis.html">
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets/htmlwidgets.js"></script>
<link href="libs/leaflet/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet/leaflet.js"></script>
<link href="libs/leafletfix/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding/leaflet.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>1</b> Data</a><ul>
<li class="chapter" data-level="1.1" data-path="data.html"><a href="data.html#fef"><i class="fa fa-check"></i><b>1.1</b> FEF Tree Biomass Data Set</a></li>
<li class="chapter" data-level="1.2" data-path="data.html"><a href="data.html#face-experiment-data-set"><i class="fa fa-check"></i><b>1.2</b> FACE Experiment Data Set</a></li>
<li class="chapter" data-level="1.3" data-path="data.html"><a href="data.html#pef"><i class="fa fa-check"></i><b>1.3</b> PEF Inventory and LiDAR Data Set</a></li>
<li class="chapter" data-level="1.4" data-path="data.html"><a href="data.html#looking-forward"><i class="fa fa-check"></i><b>1.4</b> Looking Forward</a></li>
<li class="chapter" data-level="1.5" data-path="data.html"><a href="data.html#how-to-learn-the-most-important-section-in-this-book"><i class="fa fa-check"></i><b>1.5</b> How to Learn (The Most Important Section in This Book!)</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html"><i class="fa fa-check"></i><b>2</b> Introduction to R and RStudio</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#obtaining-and-installing-r"><i class="fa fa-check"></i><b>2.1</b> Obtaining and Installing R</a></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#obtaining-and-installing-rstudio"><i class="fa fa-check"></i><b>2.2</b> Obtaining and Installing RStudio</a></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#using-r-and-rstudio"><i class="fa fa-check"></i><b>2.3</b> Using R and RStudio</a><ul>
<li class="chapter" data-level="2.3.1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#r-as-a-calculator"><i class="fa fa-check"></i><b>2.3.1</b> R as a calculator</a></li>
<li class="chapter" data-level="2.3.2" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#sec:dec"><i class="fa fa-check"></i><b>2.3.2</b> Basic descriptive statistics and graphics in R</a></li>
<li class="chapter" data-level="2.3.3" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#simple-linear-regression-in-r"><i class="fa fa-check"></i><b>2.3.3</b> Simple linear regression in R</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#how-to-learn"><i class="fa fa-check"></i><b>2.4</b> How to Learn</a></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#getting-help"><i class="fa fa-check"></i><b>2.5</b> Getting help</a></li>
<li class="chapter" data-level="2.6" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#workspace-working-directory-and-keeping-organized"><i class="fa fa-check"></i><b>2.6</b> Workspace, working directory, and keeping organized</a></li>
<li class="chapter" data-level="2.7" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#quality-of-r-code"><i class="fa fa-check"></i><b>2.7</b> Quality of R code</a><ul>
<li class="chapter" data-level="2.7.1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#naming-files"><i class="fa fa-check"></i><b>2.7.1</b> Naming Files</a></li>
<li class="chapter" data-level="2.7.2" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#naming-variables"><i class="fa fa-check"></i><b>2.7.2</b> Naming Variables</a></li>
<li class="chapter" data-level="2.7.3" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#syntax"><i class="fa fa-check"></i><b>2.7.3</b> Syntax</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="scripts-r-markdown-and-reproducible-research.html"><a href="scripts-r-markdown-and-reproducible-research.html"><i class="fa fa-check"></i><b>3</b> Scripts, R Markdown, and Reproducible Research</a><ul>
<li class="chapter" data-level="3.1" data-path="scripts-r-markdown-and-reproducible-research.html"><a href="scripts-r-markdown-and-reproducible-research.html#scripts-in-r"><i class="fa fa-check"></i><b>3.1</b> Scripts in R</a></li>
<li class="chapter" data-level="3.2" data-path="scripts-r-markdown-and-reproducible-research.html"><a href="scripts-r-markdown-and-reproducible-research.html#r-markdown"><i class="fa fa-check"></i><b>3.2</b> R Markdown</a><ul>
<li class="chapter" data-level="3.2.1" data-path="scripts-r-markdown-and-reproducible-research.html"><a href="scripts-r-markdown-and-reproducible-research.html#creating-and-processing-r-markdown-documents"><i class="fa fa-check"></i><b>3.2.1</b> Creating and processing R Markdown documents</a></li>
<li class="chapter" data-level="3.2.2" data-path="scripts-r-markdown-and-reproducible-research.html"><a href="scripts-r-markdown-and-reproducible-research.html#text-lists-and-headers"><i class="fa fa-check"></i><b>3.2.2</b> Text: Lists and Headers</a></li>
<li class="chapter" data-level="3.2.3" data-path="scripts-r-markdown-and-reproducible-research.html"><a href="scripts-r-markdown-and-reproducible-research.html#code-chunks"><i class="fa fa-check"></i><b>3.2.3</b> Code Chunks</a></li>
<li class="chapter" data-level="3.2.4" data-path="scripts-r-markdown-and-reproducible-research.html"><a href="scripts-r-markdown-and-reproducible-research.html#output-formats-other-than-html"><i class="fa fa-check"></i><b>3.2.4</b> Output formats other than HTML</a></li>
<li class="chapter" data-level="3.2.5" data-path="scripts-r-markdown-and-reproducible-research.html"><a href="scripts-r-markdown-and-reproducible-research.html#latex-knitr-and-bookdown"><i class="fa fa-check"></i><b>3.2.5</b> LaTeX, knitr, and bookdown</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-structures.html"><a href="data-structures.html"><i class="fa fa-check"></i><b>4</b> Data Structures</a><ul>
<li class="chapter" data-level="4.1" data-path="data-structures.html"><a href="data-structures.html#vectors"><i class="fa fa-check"></i><b>4.1</b> Vectors</a><ul>
<li class="chapter" data-level="4.1.1" data-path="data-structures.html"><a href="data-structures.html#types-conversion-and-coercion"><i class="fa fa-check"></i><b>4.1.1</b> Types, Conversion, and Coercion</a></li>
<li class="chapter" data-level="4.1.2" data-path="data-structures.html"><a href="data-structures.html#accessing-specific-elements-of-vectors"><i class="fa fa-check"></i><b>4.1.2</b> Accessing Specific Elements of Vectors</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="data-structures.html"><a href="data-structures.html#factors"><i class="fa fa-check"></i><b>4.2</b> Factors</a></li>
<li class="chapter" data-level="4.3" data-path="data-structures.html"><a href="data-structures.html#names-of-objects-in-r"><i class="fa fa-check"></i><b>4.3</b> Names of objects in R</a></li>
<li class="chapter" data-level="4.4" data-path="data-structures.html"><a href="data-structures.html#missing-data-infinity-etc."><i class="fa fa-check"></i><b>4.4</b> Missing Data, Infinity, etc.</a><ul>
<li class="chapter" data-level="4.4.1" data-path="data-structures.html"><a href="data-structures.html#infinity-and-nan"><i class="fa fa-check"></i><b>4.4.1</b> Infinity and NaN</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="data-structures.html"><a href="data-structures.html#data-frames"><i class="fa fa-check"></i><b>4.5</b> Data Frames</a><ul>
<li class="chapter" data-level="4.5.1" data-path="data-structures.html"><a href="data-structures.html#accessing-specific-elements-of-data-frames"><i class="fa fa-check"></i><b>4.5.1</b> Accessing specific elements of data frames</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="data-structures.html"><a href="data-structures.html#lists"><i class="fa fa-check"></i><b>4.6</b> Lists</a><ul>
<li class="chapter" data-level="4.6.1" data-path="data-structures.html"><a href="data-structures.html#accessing-specific-elements-of-lists"><i class="fa fa-check"></i><b>4.6.1</b> Accessing specific elements of lists</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="data-structures.html"><a href="data-structures.html#subsetting-with-logical-vectors"><i class="fa fa-check"></i><b>4.7</b> Subsetting with Logical Vectors</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html"><i class="fa fa-check"></i><b>5</b> Manipulating Data with <code>dplyr</code></a><ul>
<li class="chapter" data-level="5.1" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html#minnesota-tree-growth-data"><i class="fa fa-check"></i><b>5.1</b> Minnesota tree growth data</a></li>
<li class="chapter" data-level="5.2" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html#improved-data-frames"><i class="fa fa-check"></i><b>5.2</b> Improved Data Frames</a></li>
<li class="chapter" data-level="5.3" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html#filtering-data-by-row"><i class="fa fa-check"></i><b>5.3</b> Filtering Data By Row</a></li>
<li class="chapter" data-level="5.4" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html#selecting-variables-by-column"><i class="fa fa-check"></i><b>5.4</b> Selecting Variables by Column</a></li>
<li class="chapter" data-level="5.5" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html#pipes"><i class="fa fa-check"></i><b>5.5</b> Pipes</a></li>
<li class="chapter" data-level="5.6" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html#arranging-data-by-row"><i class="fa fa-check"></i><b>5.6</b> Arranging Data by Row</a></li>
<li class="chapter" data-level="5.7" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html#renaming-variables"><i class="fa fa-check"></i><b>5.7</b> Renaming Variables</a></li>
<li class="chapter" data-level="5.8" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html#creating-new-variables"><i class="fa fa-check"></i><b>5.8</b> Creating New Variables</a></li>
<li class="chapter" data-level="5.9" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html#data-summaries-and-grouping"><i class="fa fa-check"></i><b>5.9</b> Data Summaries and Grouping</a></li>
<li class="chapter" data-level="5.10" data-path="manipulating-data-with-dplyr.html"><a href="manipulating-data-with-dplyr.html#counts"><i class="fa fa-check"></i><b>5.10</b> Counts</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="functions-and-programming.html"><a href="functions-and-programming.html"><i class="fa fa-check"></i><b>6</b> Functions and Programming</a><ul>
<li class="chapter" data-level="6.1" data-path="functions-and-programming.html"><a href="functions-and-programming.html#r-functions"><i class="fa fa-check"></i><b>6.1</b> R Functions</a></li>
<li class="chapter" data-level="6.2" data-path="functions-and-programming.html"><a href="functions-and-programming.html#programming-conditional-statements"><i class="fa fa-check"></i><b>6.2</b> Programming: Conditional Statements</a><ul>
<li class="chapter" data-level="6.2.1" data-path="functions-and-programming.html"><a href="functions-and-programming.html#comparison-and-logical-operators"><i class="fa fa-check"></i><b>6.2.1</b> Comparison and Logical Operators</a></li>
<li class="chapter" data-level="6.2.2" data-path="functions-and-programming.html"><a href="functions-and-programming.html#functions-with-multiple-returns"><i class="fa fa-check"></i><b>6.2.2</b> Functions with Multiple Returns</a></li>
<li class="chapter" data-level="6.2.3" data-path="functions-and-programming.html"><a href="functions-and-programming.html#creating-functions"><i class="fa fa-check"></i><b>6.2.3</b> Creating functions</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="functions-and-programming.html"><a href="functions-and-programming.html#more-on-functions"><i class="fa fa-check"></i><b>6.3</b> More on Functions</a><ul>
<li class="chapter" data-level="6.3.1" data-path="functions-and-programming.html"><a href="functions-and-programming.html#calling-functions"><i class="fa fa-check"></i><b>6.3.1</b> Calling Functions</a></li>
<li class="chapter" data-level="6.3.2" data-path="functions-and-programming.html"><a href="functions-and-programming.html#the-...-argument"><i class="fa fa-check"></i><b>6.3.2</b> The <code>...</code> Argument</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="working-with-data-sources.html"><a href="working-with-data-sources.html"><i class="fa fa-check"></i><b>7</b> Working with Data Sources</a><ul>
<li class="chapter" data-level="7.1" data-path="working-with-data-sources.html"><a href="working-with-data-sources.html#reading-data-into-r"><i class="fa fa-check"></i><b>7.1</b> Reading Data into R</a></li>
<li class="chapter" data-level="7.2" data-path="working-with-data-sources.html"><a href="working-with-data-sources.html#reading-data-with-missing-observations"><i class="fa fa-check"></i><b>7.2</b> Reading Data with missing observations</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html"><i class="fa fa-check"></i><b>8</b> Spatial Data Visualization and Analysis</a><ul>
<li class="chapter" data-level="8.1" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#overview"><i class="fa fa-check"></i><b>8.1</b> Overview</a><ul>
<li class="chapter" data-level="8.1.1" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#some-spatial-data-packages"><i class="fa fa-check"></i><b>8.1.1</b> Some Spatial Data Packages</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#motivating-data"><i class="fa fa-check"></i><b>8.2</b> Motivating Data</a></li>
<li class="chapter" data-level="8.3" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#reading-spatial-data-into-r"><i class="fa fa-check"></i><b>8.3</b> Reading Spatial Data into R</a></li>
<li class="chapter" data-level="8.4" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#coordinate-reference-systems"><i class="fa fa-check"></i><b>8.4</b> Coordinate Reference Systems</a></li>
<li class="chapter" data-level="8.5" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#ggmap"><i class="fa fa-check"></i><b>8.5</b> Illustration using <code>ggmap</code></a></li>
<li class="chapter" data-level="8.6" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#illustration-using-leaflet"><i class="fa fa-check"></i><b>8.6</b> Illustration using <code>leaflet</code></a></li>
<li class="chapter" data-level="8.7" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#subsetting-spatial-data"><i class="fa fa-check"></i><b>8.7</b> Subsetting Spatial Data</a><ul>
<li class="chapter" data-level="8.7.1" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#fetching-and-cropping-data-using-raster"><i class="fa fa-check"></i><b>8.7.1</b> Fetching and Cropping Data using <code>raster</code></a></li>
<li class="chapter" data-level="8.7.2" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#logical-index-and-name-subsetting"><i class="fa fa-check"></i><b>8.7.2</b> Logical, Index, and Name Subsetting</a></li>
<li class="chapter" data-level="8.7.3" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#spatial-subsetting-and-overlay"><i class="fa fa-check"></i><b>8.7.3</b> Spatial Subsetting and Overlay</a></li>
<li class="chapter" data-level="8.7.4" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#spatial-aggregation"><i class="fa fa-check"></i><b>8.7.4</b> Spatial Aggregation</a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="spatial-data-visualization-and-analysis.html"><a href="spatial-data-visualization-and-analysis.html#where-to-go-from-here"><i class="fa fa-check"></i><b>8.8</b> Where to go from here</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Forestry 472: Ecological Monitoring and Data Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="working-with-data-sources" class="section level1">
<h1><span class="header-section-number">Chapter 7</span> Working with Data Sources</h1>
<p>Bringing data into R, exporting data from R in a form that is readable by other software, cleaning and reshaping data, and other data manipulation tasks are an important and often overlooked component of data science. The book <span class="citation">Spector (<a href="#ref-SpectorDataManipulation">2008</a>)</span>, while a few years old, is still an excellent reference for data-related issues. And the <em>R Data Import/Export</em> manual, available online at <a href="https://cran.r-project.org/doc/manuals/r-release/R-data.html" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-data.html</a>, is an up-to-date (and free) reference on importing a wide variety of datasets into R and on exporting data in various forms.</p>
<div id="reading-data-into-r" class="section level2">
<h2><span class="header-section-number">7.1</span> Reading Data into R</h2>
<p>Data come in a dizzying variety of forms. It might be in a proprietary format such as a .xlsx Excel file, a .sav SPSS file, or a .mtw Minitab file. It might be structured using a <a href="https://en.wikipedia.org/wiki/Relational_model">relational model</a>, for example, the USDA Forest Service <a href="https://www.fia.fs.fed.us/tools-data/">Forest Inventory and Analysis database</a>. It might be a data-interchange format such as <a href="http://www.json.org/">JSON</a> (JavaScript Object Notation), or a markup language format such as <a href="https://en.wikipedia.org/wiki/XML">XML</a> (Extensible Markup Language), perhaps with specialized standards for describing ecological information, see, e.g., <a href="https://en.wikipedia.org/wiki/Ecological_Metadata_Language">EML</a> (Ecological Metadata Language). Both XML and EML are common data metadata formats (i.e., data that provides information about other data). Fortunately many datasets are (or can be) saved as plain text files, and most software can both read and write such files, so our initial focus will be on reading plain text files into R and saving data from R in plain text format. RStudio provides a handy <a href="http://www.rstudio.com/resources/cheatsheets">data import cheat sheet</a> for many of the read functions detailed in this section.</p>
<p>The <code>foreign</code> R package provides functions to directly read data saved in some of the proprietary formats into R, which is sometimes unavoidable, but if possible it is good to save data from another package as plain text and then read this plain text file into R.</p>
<p>The function <code>read.table()</code> and its offshoots such as <code>read.csv()</code> are used to read in rectangular data from a text file. For example, the file <code>FEF-trees.csv</code> described in Section <a href="data.html#fef">1.1</a> contains biomass information for trees measured on plots within different watersheds across years. Below are the first seven rows and columns of that file:</p>
<pre><code>watershed,year,plot,species,dbh_in,height_ft,stem_green_kg
3,1991,29,Acer rubrum,6,48,92.2
3,1991,33,Acer rubrum,6.9,48,102.3
3,1991,35,Acer rubrum,6.4,48,124.4
3,1991,39,Acer rubrum,6.5,49,91.7
3,1991,44,Acer rubrum,7.2,51,186.2
3,1992,26,Acer rubrum,3.1,40,20.8</code></pre>
<p>As is evident, the first line of the file contains the names of the variables, separated (delimited) by commas. Each subsequent line contains information about each tree’s location (watershed code), measurement year, plot (within watershed), species, DBH, height, and weight of various components of the tree (e.g., <code>stem_green_kg</code> is the green weight of the stem in kilograms).<a href="#fn25" class="footnote-ref" id="fnref25"><sup>25</sup></a></p>
<p>This file is accessible at <a href="http://blue.for.msu.edu/FOR472/data/FEF-trees.csv" class="uri">http://blue.for.msu.edu/FOR472/data/FEF-trees.csv</a>. The <code>read.table()</code> function is used to read these data into an R data frame.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>fef.file &lt;-<span class="st"> &quot;http://blue.for.msu.edu/FOR472/data/FEF-trees.csv&quot;</span>
<span class="op">&gt;</span><span class="st"> </span>fef.trees &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="dt">file =</span> fef.file, <span class="dt">header =</span> <span class="ot">TRUE</span>, 
<span class="op">+</span><span class="st">   </span><span class="dt">sep =</span> <span class="st">&quot;,&quot;</span>)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(fef.trees[, <span class="dv">1</span><span class="op">:</span><span class="dv">6</span>])</code></pre>
<pre><code>  watershed year plot     species dbh_in height_ft
1         3 1991   29 Acer rubrum    6.0        48
2         3 1991   33 Acer rubrum    6.9        48
3         3 1991   35 Acer rubrum    6.4        48
4         3 1991   39 Acer rubrum    6.5        49
5         3 1991   44 Acer rubrum    7.2        51
6         3 1992   26 Acer rubrum    3.1        40</code></pre>
<p>The arguments used in this call to <code>read.table()</code> include:</p>
<ul>
<li><code>file = fef.file</code> tells R the location of the file. In this case the string <code>http://blue.for.msu.edu/FOR472/data/FEF-trees.csv</code> giving the location is rather long, so it was first assigned to the object <code>fef.file</code>.</li>
<li><code>header = TRUE</code> tells R the first line of the file gives the names of the variables.</li>
<li><code>sep = &quot;,&quot;</code> tells R that a comma separates the fields in the file.</li>
</ul>
<p>The function <code>read.csv()</code> is the same as <code>read.table()</code> except the default separator is a comma, whereas the default separator for <code>read.table()</code> is whitespace.</p>
<p>The file <code>FEF-trees.tsv</code> contains the same data, except a tab is used in place of a comma to separate fields. The only change needed to read in the data in this file is in the <code>sep</code> argument (and of course the <code>file</code> argument, since the data are stored in a different file):</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>fef.file &lt;-<span class="st"> &quot;http://blue.for.msu.edu/FOR472/data/FEF-trees.tsv&quot;</span>
<span class="op">&gt;</span><span class="st"> </span>fef.trees &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="dt">file =</span> fef.file, <span class="dt">header =</span> <span class="ot">TRUE</span>, 
<span class="op">+</span><span class="st">   </span><span class="dt">sep =</span> <span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(fef.trees[, <span class="dv">1</span><span class="op">:</span><span class="dv">6</span>])</code></pre>
<pre><code>  watershed year plot     species dbh_in height_ft
1         3 1991   29 Acer rubrum    6.0        48
2         3 1991   33 Acer rubrum    6.9        48
3         3 1991   35 Acer rubrum    6.4        48
4         3 1991   39 Acer rubrum    6.5        49
5         3 1991   44 Acer rubrum    7.2        51
6         3 1992   26 Acer rubrum    3.1        40</code></pre>
<p>File extensions, e.g., <code>.csv</code> or <code>.tsv</code>, are naming conventions only and are there to remind us how the columns are delimited, i.e., they have no influence on R’s file read functions.</p>
<p>A third file, <a href="http://blue.for.msu.edu/FOR472/data/FEF-trees.txt"><code>FEF-trees.txt</code></a>, contains the same data, but also contains a few lines of explanatory text above the names of the variables. It also uses whitespace rather than a comma or a tab as a delimiter. Here are the first several lines of the file and six columns of data.</p>
<pre><code>This file includes felled tree biomass by tree component for hardwood 
species sampled on the Fernow Experimental Forest (FEF), West Virginia. 
A total of 88 trees were sampled from plots within two watersheds. 

&quot;watershed&quot; &quot;year&quot; &quot;plot&quot; &quot;species&quot; &quot;dbh_in&quot; &quot;height_ft&quot; &quot;stem_green_kg&quot;
3 1991 29 &quot;Acer rubrum&quot; 6 48 92.2
3 1991 33 &quot;Acer rubrum&quot; 6.9 48 102.3
3 1991 35 &quot;Acer rubrum&quot; 6.4 48 124.4
3 1991 39 &quot;Acer rubrum&quot; 6.5 49 91.7
3 1991 44 &quot;Acer rubrum&quot; 7.2 51 186.2
3 1992 26 &quot;Acer rubrum&quot; 3.1 40 20.8</code></pre>
<p>Notice that in this file column (variable) names are put inside of quotation marks. Also, variable values that are characters are also quoted. This is necessary because character strings could include whitespace, and hence R would assume these are column delimiters.</p>
<p>To read in this file we need to tell R to skip the first four lines above the header and also that whitespace is the delimiter. The <code>skip</code> argument handles the first, and the <code>sep</code> argument the second.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>fef.file &lt;-<span class="st"> &quot;http://blue.for.msu.edu/FOR472/data/FEF-trees.txt&quot;</span>
<span class="op">&gt;</span><span class="st"> </span>fef.trees &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="dt">file =</span> fef.file, <span class="dt">header =</span> <span class="ot">TRUE</span>, 
<span class="op">+</span><span class="st">   </span><span class="dt">sep =</span> <span class="st">&quot; &quot;</span>, <span class="dt">skip =</span> <span class="dv">4</span>)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(fef.trees[, <span class="dv">1</span><span class="op">:</span><span class="dv">6</span>])</code></pre>
<pre><code>  watershed year plot     species dbh_in height_ft
1         3 1991   29 Acer rubrum    6.0        48
2         3 1991   33 Acer rubrum    6.9        48
3         3 1991   35 Acer rubrum    6.4        48
4         3 1991   39 Acer rubrum    6.5        49
5         3 1991   44 Acer rubrum    7.2        51
6         3 1992   26 Acer rubrum    3.1        40</code></pre>
<p>For fun, see what happens when the <code>skip</code> argument is left out of the <code>read.table</code> call.</p>
</div>
<div id="reading-data-with-missing-observations" class="section level2">
<h2><span class="header-section-number">7.2</span> Reading Data with missing observations</h2>
<p>Missing data are represented in many ways. Sometimes missing data are just that, i.e., the place where they should be in the file is blank. Other times specific numbers such as <span class="math inline">\(-9999\)</span> or specific symbols are used. The <code>read.table()</code> function has an argument <code>na.string</code> which allows the user to specify how missing data are indicated in the source file.</p>
<p>The site <a href="http://www.wunderground.com/history/" class="uri">http://www.wunderground.com/history/</a> makes weather data available for locations around the world, and for dates going back to 1945. The file <code>WeatherKLAN2014.csv</code> contains weather data for Lansing, Michigan for the year 2014. Here are the first few lines of that file:</p>
<pre><code>EST,Max TemperatureF,Min TemperatureF, Events
1/1/14,14,9,Snow
1/2/14,13,-3,Snow
1/3/14,13,-11,Snow
1/4/14,31,13,Snow
1/5/14,29,16,Fog-Snow
1/6/14,16,-12,Fog-Snow
1/7/14,2,-13,Snow
1/8/14,17,-1,Snow
1/9/14,21,2,Snow
1/10/14,39,21,Fog-Rain-Snow
1/11/14,41,32,Fog-Rain
1/12/14,39,31,</code></pre>
<p>Look at the last line, and notice that instead of an event such as <code>Snow</code> or <code>Fog-Snow</code> there is nothing after the comma. This observation is missing, but rather than using an explicit code such as <code>NA</code>, the site just leaves that entry blank. To read these data into R we will supply the argument <code>na.string = &quot;&quot;</code> which tells R the file indicates missing data by leaving the appropriate entry blank.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>u.weather &lt;-<span class="st"> &quot;http://blue.for.msu.edu/FOR875/data/WeatherKLAN2014.csv&quot;</span>
<span class="op">&gt;</span><span class="st"> </span>WeatherKLAN2014 &lt;-<span class="st"> </span><span class="kw">read.csv</span>(u.weather, <span class="dt">header=</span><span class="ot">TRUE</span>, 
<span class="op">+</span><span class="st">                             </span><span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>, <span class="dt">na.string =</span> <span class="st">&quot;&quot;</span>)
<span class="op">&gt;</span><span class="st"> </span>WeatherKLAN2014[<span class="dv">1</span><span class="op">:</span><span class="dv">15</span>,]</code></pre>
<pre><code>       EST Max.TemperatureF Min.TemperatureF
1   1/1/14               14                9
2   1/2/14               13               -3
3   1/3/14               13              -11
4   1/4/14               31               13
5   1/5/14               29               16
6   1/6/14               16              -12
7   1/7/14                2              -13
8   1/8/14               17               -1
9   1/9/14               21                2
10 1/10/14               39               21
11 1/11/14               41               32
12 1/12/14               39               31
13 1/13/14               44               34
14 1/14/14               37               26
15 1/15/14               27               18
          Events
1           Snow
2           Snow
3           Snow
4           Snow
5       Fog-Snow
6       Fog-Snow
7           Snow
8           Snow
9           Snow
10 Fog-Rain-Snow
11      Fog-Rain
12          &lt;NA&gt;
13          Rain
14     Rain-Snow
15          Snow</code></pre>
<p>Also, in the code above, notice I use <code>stringsAsFactors = FALSE</code> to prevent the character variables to be converted to factors, which R does by default (which can be quite annoying).</p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-SpectorDataManipulation">
<p>Spector, Phil. 2008. <em>Data Manipulation with R</em>. Use R! pub-sv:adr: pub-sv.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="25">
<li id="fn25"><p>The metadata for the FEF are at <a href="http://www.fs.usda.gov/rds/archive/Product/RDS-2016-0016" class="uri">http://www.fs.usda.gov/rds/archive/Product/RDS-2016-0016</a>. For convenience I renamed the data file from the original <code>felled_tree_biomass.csv</code> to <code>FEF-trees.csv</code>.<a href="working-with-data-sources.html#fnref25" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="functions-and-programming.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="spatial-data-visualization-and-analysis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["bookdown.pdf"],
"toc": {
"collapse": "none"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
